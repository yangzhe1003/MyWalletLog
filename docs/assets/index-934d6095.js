var Ke=Object.defineProperty;var Ge=(t,e,s)=>e in t?Ke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var ge=(t,e,s)=>(Ge(t,typeof e!="symbol"?e+"":e,s),s),xe=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var m=(t,e,s)=>(xe(t,e,"read from private field"),s?s.call(t):e.get(t)),E=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},ue=(t,e,s,n)=>(xe(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s);var p=(t,e,s)=>(xe(t,e,"access private method"),s);import{r as U,j as l}from"./index-c45d47ea.js";import{a as $,I as me,S as I,C as qe,P as Xe}from"./axios-2aba4112.js";import{F as v,a as Ne,T as Ae,b as Qe,U as We,S as Ye,D as et,c as tt,n as V,e as st}from"./save_excel-e1179387.js";import{B as D,E as nt}from"./EditOutlined-1424166f.js";import{S as rt,L as at}from"./index-2d432e81.js";const it={ethereum:"https://eth.llamarpc.com",optimism:"https://optimism-mainnet.public.blastapi.io",arbitrum:"https://rpc.ankr.com/arbitrum",polygon:"https://polygon-bor.publicnode.com",bsc:"https://bscrpc.com"};async function W(t,e){try{let s=it[e];if(!s)return"Error: Invalid Network Name";let r=(await $.post(s,{jsonrpc:"2.0",method:"eth_getBalance",params:[t,"latest"],id:1})).data.result;return(parseInt(r,16)/10**18).toFixed(3)}catch(s){return console.error(s),"Error"}}const lt={ethereum:"https://eth.llamarpc.com",optimism:"https://optimism-mainnet.public.blastapi.io",arbitrum:"https://rpc.ankr.com/arbitrum",polygon:"https://polygon-bor.publicnode.com",bsc:"https://bscrpc.com"};async function Y(t,e){try{let s=lt[e];if(!s)return"Error: Invalid Network Name";const r=(await $.post(s,{jsonrpc:"2.0",method:"eth_getTransactionCount",params:[t,"latest"],id:1})).data.result;return parseInt(r,16)}catch(s){return console.error(s),"Error"}}async function ee(t){try{let e="https://zksync2-mainnet-explorer.zksync.io/address/"+t;const s=await $.get(e);let n,r,o;return"0x0000000000000000000000000000000000000000"in s.data.info.balances?r=(parseInt(s.data.info.balances["0x0000000000000000000000000000000000000000"].balance,16)/10**18).toFixed(3):r=0,"0x3355df6d4c9c3035724fd0e3914de96a5a83aaf4"in s.data.info.balances?o=(parseInt(s.data.info.balances["0x3355df6d4c9c3035724fd0e3914de96a5a83aaf4"].balance,16)/10**6).toFixed(3):o=0,n=s.data.info.sealedNonce,{balance2:r,tx2:n,usdcBalance:o}}catch(e){return console.error(e),{balance2:"Error",tx2:"Error",usdcBalance:"Error"}}}async function te(t){try{let e="https://api.zksync.io/jsrpc";const s=await $.post(e,{id:1,jsonrpc:"2.0",method:"account_info",params:[t]});let n;"ETH"in s.data.result.committed.balances?n=(s.data.result.committed.balances.ETH/10**18).toFixed(3):n=0;let r=s.data.result.committed.nonce;return{balance1:n,tx1:r}}catch(e){return console.error(e),{balance1:"Error",tx1:"Error"}}}const ot="6.3.0";function ct(t,e,s){const n=e.split("|").map(o=>o.trim());for(let o=0;o<n.length;o++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const r=new Error(`invalid value for type ${e}`);throw r.code="INVALID_ARGUMENT",r.argument=`value.${s}`,r.value=t,r}function Oe(t,e,s){for(let n in e){let r=e[n];const o=s?s[n]:null;o&&ct(r,o,n),Object.defineProperty(t,n,{enumerable:!0,value:r,writable:!1})}}function H(t){if(t==null)return"null";if(Array.isArray(t))return"[ "+t.map(H).join(", ")+" ]";if(t instanceof Uint8Array){const e="0123456789abcdef";let s="0x";for(let n=0;n<t.length;n++)s+=e[t[n]>>4],s+=e[t[n]&15];return s}if(typeof t=="object"&&typeof t.toJSON=="function")return H(t.toJSON());switch(typeof t){case"boolean":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"number":return t.toString();case"string":return JSON.stringify(t);case"object":{const e=Object.keys(t);return e.sort(),"{ "+e.map(s=>`${H(s)}: ${H(t[s])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function dt(t,e,s){{const r=[];if(s){if("message"in s||"code"in s||"name"in s)throw new Error(`value will overwrite populated values: ${H(s)}`);for(const o in s){const g=s[o];r.push(o+"="+H(g))}}r.push(`code=${e}`),r.push(`version=${ot}`),r.length&&(t+=" ("+r.join(", ")+")")}let n;switch(e){case"INVALID_ARGUMENT":n=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":n=new RangeError(t);break;default:n=new Error(t)}return Oe(n,{code:e}),s&&Object.assign(n,s),n}function w(t,e,s,n){if(!t)throw dt(e,s,n)}function b(t,e,s,n){w(t,e,"INVALID_ARGUMENT",{argument:s,value:n})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"){const s=String.fromCharCode(233).normalize("NFD"),n=String.fromCharCode(101,769);if(s!==n)throw new Error("broken")}t.push(e)}catch{}return t},[]);function ut(t,e,s){if(s==null&&(s=""),t!==e){let n=s,r="new";s&&(n+=".",r+=" "+s),w(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:r})}}function mt(t,e,s){if(t instanceof Uint8Array)return s?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x([0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((t.length-2)/2);let r=2;for(let o=0;o<n.length;o++)n[o]=parseInt(t.substring(r,r+2),16),r+=2;return n}b(!1,"invalid BytesLike value",e||"value",t)}function ft(t,e){return mt(t,e,!1)}const Fe=BigInt(0),Z=BigInt(1),K=9007199254740991;function ye(t,e){const s=Ue(t,"value"),n=BigInt(fe(e,"width"));if(w(s>>n===Fe,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),s>>n-Z){const r=(Z<<n)-Z;return-((~s&r)+Z)}return s}function ze(t,e){const s=Ue(t,"value"),n=BigInt(fe(e,"bits"));return s&(Z<<n)-Z}function Te(t,e){switch(typeof t){case"bigint":return t;case"number":return b(Number.isInteger(t),"underflow",e||"value",t),b(t>=-K&&t<=K,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(s){b(!1,`invalid BigNumberish string: ${s.message}`,e||"value",t)}}b(!1,"invalid BigNumberish value",e||"value",t)}function Ue(t,e){const s=Te(t,e);return w(s>=Fe,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),s}const je="0123456789abcdef";function ht(t){if(t instanceof Uint8Array){let e="0x0";for(const s of t)e+=je[s>>4],e+=je[s&15];return BigInt(e)}return Te(t)}function fe(t,e){switch(typeof t){case"bigint":return b(t>=-K&&t<=K,"overflow",e||"value",t),Number(t);case"number":return b(Number.isInteger(t),"underflow",e||"value",t),b(t>=-K&&t<=K,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return fe(BigInt(t),e)}catch(s){b(!1,`invalid numeric string: ${s.message}`,e||"value",t)}}b(!1,"invalid numeric value",e||"value",t)}const gt=BigInt(-1),N=BigInt(0),G=BigInt(1),xt=BigInt(5),P={};let q="0000";for(;q.length<80;)q+=q;function R(t){let e=q;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function se(t,e,s){const n=BigInt(e.width);if(e.signed){const r=G<<n-G;w(s==null||t>=-r&&t<r,"overflow","NUMERIC_FAULT",{operation:s,fault:"overflow",value:t}),t>N?t=ye(ze(t,n),n):t=-ye(ze(-t,n),n)}else{const r=G<<n;w(s==null||t>=0&&t<r,"overflow","NUMERIC_FAULT",{operation:s,fault:"overflow",value:t}),t=(t%r+r)%r&r-G}return t}function pe(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,s=128,n=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const o=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);b(o,"invalid fixed format","format",t),e=o[1]!=="u",s=parseInt(o[2]),n=parseInt(o[3])}}else if(t){const o=t,g=(y,C,T)=>o[y]==null?T:(b(typeof o[y]===C,"invalid fixed format ("+y+" not "+C+")","format."+y,o[y]),o[y]);e=g("signed","boolean",e),s=g("width","number",s),n=g("decimals","number",n)}b(s%8===0,"invalid FixedNumber width (not byte aligned)","format.width",s),b(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const r=(e?"":"u")+"fixed"+String(s)+"x"+String(n);return{signed:e,width:s,decimals:n,name:r}}function pt(t,e){let s="";t<N&&(s="-",t*=gt);let n=t.toString();if(e===0)return s+n;for(;n.length<=e;)n=q+n;const r=n.length-e;for(n=n.substring(0,r)+"."+n.substring(r);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return s+n}var z,x,S,O,M,j,A,ie,_e,le,ke,oe,Se,ce,Ie;const L=class{constructor(e,s,n){E(this,O);E(this,j);E(this,ie);E(this,le);E(this,oe);E(this,ce);ge(this,"format");E(this,z,void 0);E(this,x,void 0);E(this,S,void 0);ge(this,"_value");ut(e,P,"FixedNumber"),ue(this,x,s),ue(this,z,n);const r=pt(s,n.decimals);Oe(this,{format:n.name,_value:r}),ue(this,S,R(n.decimals))}get signed(){return m(this,z).signed}get width(){return m(this,z).width}get decimals(){return m(this,z).decimals}get value(){return m(this,x)}addUnsafe(e){return p(this,ie,_e).call(this,e)}add(e){return p(this,ie,_e).call(this,e,"add")}subUnsafe(e){return p(this,le,ke).call(this,e)}sub(e){return p(this,le,ke).call(this,e,"sub")}mulUnsafe(e){return p(this,oe,Se).call(this,e)}mul(e){return p(this,oe,Se).call(this,e,"mul")}mulSignal(e){p(this,O,M).call(this,e);const s=m(this,x)*m(e,x);return w(s%m(this,S)===N,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),p(this,j,A).call(this,s/m(this,S),"mulSignal")}divUnsafe(e){return p(this,ce,Ie).call(this,e)}div(e){return p(this,ce,Ie).call(this,e,"div")}divSignal(e){w(m(e,x)!==N,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),p(this,O,M).call(this,e);const s=m(this,x)*m(this,S);return w(s%m(e,x)===N,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),p(this,j,A).call(this,s/m(e,x),"divSignal")}cmp(e){let s=this.value,n=e.value;const r=this.decimals-e.decimals;return r>0?n*=R(r):r<0&&(s*=R(-r)),s<n||s>n?-1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=m(this,x);return m(this,x)<N&&(e-=m(this,S)-G),e=m(this,x)/m(this,S)*m(this,S),p(this,j,A).call(this,e,"floor")}ceiling(){let e=m(this,x);return m(this,x)>N&&(e+=m(this,S)-G),e=m(this,x)/m(this,S)*m(this,S),p(this,j,A).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const s=this.decimals-e,n=xt*R(s-1);let r=this.value+n;const o=R(s);return r=r/o*o,se(r,m(this,z),"round"),new L(P,r,m(this,z))}isZero(){return m(this,x)===N}isNegative(){return m(this,x)<N}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return L.fromString(this.toString(),e)}static fromValue(e,s,n){s==null&&(s=0);const r=pe(n);let o=Te(e,"value");const g=s-r.decimals;if(g>0){const y=R(g);w(o%y===N,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=y}else g<0&&(o*=R(-g));return se(o,r,"fromValue"),new L(P,o,r)}static fromString(e,s){const n=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);b(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",e);const r=pe(s);let o=n[2]||"0",g=n[3]||"";for(;g.length<r.decimals;)g+=q;w(g.substring(r.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),g=g.substring(0,r.decimals);const y=BigInt(n[1]+o+g);return se(y,r,"fromString"),new L(P,y,r)}static fromBytes(e,s){let n=ht(ft(e,"value"));const r=pe(s);return r.signed&&(n=ye(n,r.width)),se(n,r,"fromBytes"),new L(P,n,r)}};let be=L;z=new WeakMap,x=new WeakMap,S=new WeakMap,O=new WeakSet,M=function(e){b(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},j=new WeakSet,A=function(e,s){return e=se(e,m(this,z),s),new L(P,e,m(this,z))},ie=new WeakSet,_e=function(e,s){return p(this,O,M).call(this,e),p(this,j,A).call(this,m(this,x)+m(e,x),s)},le=new WeakSet,ke=function(e,s){return p(this,O,M).call(this,e),p(this,j,A).call(this,m(this,x)-m(e,x),s)},oe=new WeakSet,Se=function(e,s){return p(this,O,M).call(this,e),p(this,j,A).call(this,m(this,x)*m(e,x)/m(this,S),s)},ce=new WeakSet,Ie=function(e,s){return w(m(e,x)!==N,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),p(this,O,M).call(this,e),p(this,j,A).call(this,m(this,x)*m(this,S)/m(e,x),s)};const yt=["wei","kwei","mwei","gwei","szabo","finney","ether"];function bt(t,e){let s=18;if(typeof e=="string"){const n=yt.indexOf(e);b(n>=0,"invalid unit","unit",e),s=3*n}else e!=null&&(s=fe(e,"unit"));return be.fromValue(t,s,{decimals:s}).toString()}function Ee(t){return bt(t,18)}async function Be(t,e,s,n,r){for(let o=0;o<t.length;o++)if(t[o].isL1Originated===!0){e++;const g=Ee(t[o].data.value);s+=parseFloat(g)}else if(t[o].data.contractAddress==="0x000000000000000000000000000000000000800a"){n++;const g=Ee(t[o].data.value);r+=parseFloat(g)}return[e,s,n,r]}async function ne(t){try{let e=0,s=0,n=0,r=0,o=0,g=null,y=null;const C="https://zksync2-mainnet-explorer.zksync.io/transactions?limit=100&direction=older&accountAddress="+t,T=await $.get(C),B=T.data.total;if([e,s,n,r]=await Be(T.data.list,e,s,n,r),B>100)for(g=T.data.list[0].blockNumber,y=T.data.list[0].indexInBlock;;){let F=`https://zksync2-mainnet-explorer.zksync.io/transactions?limit=100&direction=older&accountAddress=${t}`;g!==void 0&&y!==void 0&&o!==0&&(F+=`&fromBlockNumber=${g}&fromTxIndex=${y}&offset=${o}`);const de=await $.get(F),X=de.data.list.length;if([e,s,n,r]=await Be(de.data.list,e,s,n,r),X===100)o+=X;else break}return{l1Tol2Times:e,l1Tol2Amount:s.toFixed(3),l2Tol1Times:n,l2Tol1Amount:r.toFixed(3)}}catch(e){return console.log(e),{l1Tol2Times:"Error",l1Tol2Amount:"Error",l2Tol1Times:"Error",l2Tol1Amount:"Error"}}}async function re(t){const e="https://zksync2-mainnet-explorer.zksync.io/transactions?limit=5&direction=older&accountAddress="+t;try{const s=await $.get(e);if(s.data.total===0)return{zkSyncLastTx:"无交易"};{const n=s.data.list[0].receivedAt,r=new Date(n),o=8,g=new Date(r.getTime()+o*3600*1e3),y=new Date,T=new Date(y.getTime()+o*3600*1e3)-g,B=Math.floor(T/(1e3*60*60)),F=Math.floor(B/24);return F>0?{zkSyncLastTx:`${F} 天前`}:B>0?{zkSyncLastTx:`${B} 小时前`}:{zkSyncLastTx:"刚刚"}}}catch(s){return console.error(s),{zkSyncLastTx:"Error"}}}const{Content:_t}=at,{TextArea:kt}=me,{Column:k,ColumnGroup:ae}=Ae;function jt(){const[t,e]=U.useState([]),[s,n]=U.useState(!1),[r]=v.useForm(),[o,g]=U.useState([]),[y]=v.useForm(),[C,T]=U.useState(!1),[B,F]=U.useState(!1),[de,X]=U.useState(!1),Le=async()=>{try{const a=await y.validateFields();if(a.address.length!==42){V.error({message:"错误",description:"请输入正确的地址"},2);return}T(!1);const f=t.findIndex(c=>c.address===a.address);if(f!==-1){e(t.map((i,u)=>u===f?{...i,name:a.name}:i));const c=[...t];ee(a.address).then(({balance2:i,tx2:u,usdcBalance:d})=>{c[f]={...c[f],zks2_balance:i,zks2_tx_amount:u,zks2_usdcBalance:d},e(c),localStorage.setItem("addresses",JSON.stringify(t))}),re(a.address).then(({zkSyncLastTx:i})=>{c[f]={...c[f],zks2_last_tx:i},e(c),localStorage.setItem("addresses",JSON.stringify(t))}),te(a.address).then(({balance1:i,tx1:u})=>{c[f]={...c[f],zks1_balance:i,zks1_tx_amount:u},e(c),localStorage.setItem("addresses",JSON.stringify(t))}),W(a.address,"ethereum").then(i=>{c[f]={...c[f],eth_balance:i},e(c),localStorage.setItem("addresses",JSON.stringify(t))}),Y(a.address,"ethereum").then(i=>{c[f]={...c[f],eth_tx_amount:i},e(c),localStorage.setItem("addresses",JSON.stringify(t))}),ne(a.address).then(({l1Tol2Times:i,l1Tol2Amount:u,l2Tol1Times:d,l2Tol1Amount:h})=>{c[f]={...c[f],l1Tol2Times:i,l1Tol2Amount:u,l2Tol1Times:d,l2Tol1Amount:h},e(c),localStorage.setItem("addresses",JSON.stringify(t))})}else{const c={key:t.length.toString(),name:a.name,address:a.address,eth_balance:null,eth_tx_amount:null,zks2_balance:null,zks2_tx_amount:null,zks2_usdcBalance:null,zks2_last_tx:null,zks1_balance:null,zks1_tx_amount:null,l1Tol2Times:null,l1Tol2Amount:null,l2Tol1Times:null,l2Tol1Amount:null},i=[...t,c];e(i),ee(a.address).then(({balance2:u,tx2:d,usdcBalance:h})=>{c.zks2_balance=u,c.zks2_tx_amount=d,c.zks2_usdcBalance=h,e([...i]),localStorage.setItem("addresses",JSON.stringify(i))}),re(a.address).then(({zkSyncLastTx:u})=>{c.zks2_last_tx=u,e([...i]),localStorage.setItem("addresses",JSON.stringify(i))}),te(a.address).then(({balance1:u,tx1:d})=>{c.zks1_balance=u,c.zks1_tx_amount=d,e([...i]),localStorage.setItem("addresses",JSON.stringify(i))}),W(a.address,"ethereum").then(u=>{c.eth_balance=u,e([...i]),localStorage.setItem("addresses",JSON.stringify(i))}),Y(a.address,"ethereum").then(u=>{c.eth_tx_amount=u,e([...i]),localStorage.setItem("addresses",JSON.stringify(i))}),ne(a.address).then(({l1Tol2Times:u,l1Tol2Amount:d,l2Tol1Times:h,l2Tol1Amount:_})=>{c.l1Tol2Times=u,c.l1Tol2Amount=d,c.l2Tol1Times=h,c.l2Tol1Amount=_,e([...i]),localStorage.setItem("addresses",JSON.stringify(i))})}}catch(a){V.error({message:"错误",description:a.message},2)}finally{y.resetFields()}},Ce=async()=>{if(!o.length){V.error({message:"错误",description:"请先选择要刷新的地址"},2);return}F(!0);try{const a=[...t];for(let f of o){const c=a.findIndex(i=>i.key===f);if(c!==-1){const i=a[c];i.eth_balance=null,i.eth_tx_amount=null,i.zks1_balance=null,i.zks1_tx_amount=null,i.zks2_balance=null,i.zks2_tx_amount=null,i.zks2_usdcBalance=null,i.zks2_last_tx=null,i.l1Tol2Times=null,i.l1Tol2Amount=null,i.l2Tol1Times=null,i.l2Tol1Amount=null,e([...a]),ee(i.address).then(({balance2:u,tx2:d,usdcBalance:h})=>{i.zks2_balance=u,i.zks2_tx_amount=d,i.zks2_usdcBalance=h,e([...a]),localStorage.setItem("addresses",JSON.stringify(t))}),re(i.address).then(({zkSyncLastTx:u})=>{i.zks2_last_tx=u,e([...a]),localStorage.setItem("addresses",JSON.stringify(t))}),te(i.address).then(({balance1:u,tx1:d})=>{i.zks1_balance=u,i.zks1_tx_amount=d,e([...a]),localStorage.setItem("addresses",JSON.stringify(t))}),W(i.address,"ethereum").then(u=>{i.eth_balance=u,e([...a]),localStorage.setItem("addresses",JSON.stringify(t))}),Y(i.address,"ethereum").then(u=>{i.eth_tx_amount=u,e([...a]),localStorage.setItem("addresses",JSON.stringify(t))}),ne(i.address).then(({l1Tol2Times:u,l1Tol2Amount:d,l2Tol1Times:h,l2Tol1Amount:_})=>{i.l1Tol2Times=u,i.l1Tol2Amount=d,i.l2Tol1Times=h,i.l2Tol1Amount=_,e([...a]),localStorage.setItem("addresses",JSON.stringify(t))})}}}catch(a){V.error({message:"错误",description:a.message},2)}finally{F(!1)}},Je=async()=>{try{const f=(await r.validateFields()).addresses.split(`
`),c=[...t];for(let i of f){if(i=i.trim(),i.length!==42){V.error({message:"错误",description:"请输入正确的地址"});continue}const u=c.findIndex(d=>d.address===i);if(u!==-1){const d=[...c];ee(i).then(({balance2:h,tx2:_,usdcBalance:J})=>{d[u]={...d[u],zks2_balance:h,zks2_tx_amount:_,zks2_usdcBalance:J},e(d),localStorage.setItem("addresses",JSON.stringify(d))}),re(i).then(({zkSyncLastTx:h})=>{d[u]={...d[u],zks2_last_tx:h},e(d),localStorage.setItem("addresses",JSON.stringify(d))}),te(i).then(({balance1:h,tx1:_})=>{d[u]={...d[u],zks1_balance:h,zks1_tx_amount:_},e(d),localStorage.setItem("addresses",JSON.stringify(d))}),W(i,"ethereum").then(h=>{d[u]={...d[u],eth_balance:h},e(d),localStorage.setItem("addresses",JSON.stringify(d))}),Y(i,"ethereum").then(h=>{d[u]={...d[u],eth_tx_amount:h},e(d),localStorage.setItem("addresses",JSON.stringify(d))}),ne(i).then(({l1Tol2Times:h,l1Tol2Amount:_,l2Tol1Times:J,l2Tol1Amount:he})=>{d[u]={...d[u],l1Tol2Times:h,l1Tol2Amount:_,l2Tol1Times:J,l2Tol1Amount:he},e(d),localStorage.setItem("addresses",JSON.stringify(d))})}else{const d={key:c.length.toString(),address:i,eth_balance:null,eth_tx_amount:null,zks2_balance:null,zks2_tx_amount:null,zks2_usdcBalance:null,zks1_balance:null,zks1_tx_amount:null,zks2_last_tx:null,l1Tol2Times:null,l1Tol2Amount:null,l2Tol1Times:null,l2Tol1Amount:null};c.push(d),e(c),ee(i).then(({balance2:h,tx2:_,usdcBalance:J})=>{d.zks2_balance=h,d.zks2_tx_amount=_,d.zks2_usdcBalance=J,e([...c]),localStorage.setItem("addresses",JSON.stringify(c))}),re(i).then(({zkSyncLastTx:h})=>{d.zks2_last_tx=h,e([...c]),localStorage.setItem("addresses",JSON.stringify(c))}),te(i).then(({balance1:h,tx1:_})=>{d.zks1_balance=h,d.zks1_tx_amount=_,e([...c]),localStorage.setItem("addresses",JSON.stringify(c))}),W(i,"ethereum").then(h=>{d.eth_balance=h,e([...c]),localStorage.setItem("addresses",JSON.stringify(c))}),Y(i,"ethereum").then(h=>{d.eth_tx_amount=h,e([...c]),localStorage.setItem("addresses",JSON.stringify(c))}),ne(i).then(({l1Tol2Times:h,l1Tol2Amount:_,l2Tol1Times:J,l2Tol1Amount:he})=>{d.l1Tol2Times=h,d.l1Tol2Amount=_,d.l2Tol1Times=J,d.l2Tol1Amount=he,e([...c]),localStorage.setItem("addresses",JSON.stringify(c))})}}n(!1)}catch(a){V.error({message:"错误",description:a.message})}finally{r.resetFields()}},ve=()=>{T(!0)},De=()=>{n(!0)},Re=()=>{st(t,"walletInfo")};U.useEffect(()=>{X(!0);const a=localStorage.getItem("addresses");setTimeout(()=>{X(!1)},500),a&&e(JSON.parse(a))},[]);const Me=()=>{T(!1)},$e=a=>{e(t.filter(f=>f.key!==a)),localStorage.setItem("addresses",JSON.stringify(t.filter(f=>f.key!==a)))},Ve=()=>{e(t.filter(a=>!o.includes(a.key))),localStorage.setItem("addresses",JSON.stringify(t.filter(a=>!o.includes(a.key)))),g([])},Pe={onChange:(a,f)=>{g(a)}},He=()=>{n(!1)},[Ze,we]=U.useState(null);return l.jsx("div",{children:l.jsxs(_t,{children:[l.jsx(Ne,{title:"批量添加地址",open:s,onOk:Je,onCancel:He,okButtonProps:{loading:B},okText:"添加地址",cancelText:"取消",children:l.jsx(v,{form:r,layout:"vertical",children:l.jsx(v.Item,{label:"地址",name:"addresses",rules:[{required:!0}],children:l.jsx(kt,{placeholder:"请输入地址，每行一个"})})})}),l.jsx(Ne,{title:"添加地址",open:C,onOk:Le,onCancel:Me,okButtonProps:{loading:B},okText:"添加地址",cancelText:"取消",children:l.jsxs(v,{form:y,layout:"vertical",children:[l.jsx(v.Item,{label:"地址",name:"address",rules:[{required:!0}],children:l.jsx(me,{placeholder:"请输入地址"})}),l.jsx(v.Item,{label:"备注",name:"name",children:l.jsx(me,{placeholder:"请输入备注"})})]})}),l.jsx(I,{spinning:de,children:l.jsxs(Ae,{rowSelection:{type:"checkbox",...Pe},dataSource:t,pagination:!1,bordered:!0,style:{marginBottom:"20px"},size:"small",children:[l.jsx(k,{title:"备注",dataIndex:"name",align:"center",className:"",render:(a,f)=>f.key===Ze?l.jsx(me,{placeholder:"请输入备注",defaultValue:a,onPressEnter:i=>{f.name=i.target.value,e([...t]),localStorage.setItem("addresses",JSON.stringify(t)),we(null)}}):l.jsxs(l.Fragment,{children:[l.jsx(Qe,{color:"blue",children:a}),l.jsx(D,{shape:"circle",icon:l.jsx(nt,{}),size:"small",onClick:()=>we(f.key)})]})},"name"),l.jsx(k,{title:"钱包地址",dataIndex:"address",align:"center",className:""},"address"),l.jsxs(ae,{title:"ETH",className:"zks_eth",children:[l.jsx(k,{title:"ETH",dataIndex:"eth_balance",align:"center",render:(a,f)=>a===null?l.jsx(I,{}):a,className:""},"eth_balance"),l.jsx(k,{title:"Tx",dataIndex:"eth_tx_amount",align:"center",render:(a,f)=>a===null?l.jsx(I,{}):a,className:""},"eth_tx_amount")]}),l.jsxs(ae,{title:"zkSyncLite",className:"zks_lite",children:[l.jsx(k,{title:"ETH",dataIndex:"zks1_balance",align:"center",render:(a,f)=>a===null?l.jsx(I,{}):a,className:""},"zks1_balance"),l.jsx(k,{title:"Tx",dataIndex:"zks1_tx_amount",align:"center",render:(a,f)=>a===null?l.jsx(I,{}):a,className:""},"zks1_tx_amount")]}),l.jsxs(ae,{title:"zkSyncEra",className:"zks_era",children:[l.jsx(k,{title:"ETH",dataIndex:"zks2_balance",align:"center",render:(a,f)=>a===null?l.jsx(I,{}):a,className:""},"zks2_balance"),l.jsx(k,{title:"USDC",dataIndex:"zks2_usdcBalance",align:"center",render:(a,f)=>a===null?l.jsx(I,{}):a,className:""},"zks2_usdc_balance"),l.jsx(k,{title:"Tx",dataIndex:"zks2_tx_amount",align:"center",render:(a,f)=>a===null?l.jsx(I,{}):a,className:""},"zks2_tx_amount"),l.jsx(k,{title:"最后交易",dataIndex:"zks2_last_tx",align:"center",render:(a,f)=>a===null?l.jsx(I,{}):l.jsx("a",{href:"https://explorer.zksync.io/address/"+f.address,target:"_blank",children:a}),className:""},"zks2_last_tx"),l.jsxs(ae,{title:"官方桥跨链Tx数",className:"",children:[l.jsx(k,{title:"L1->L2",dataIndex:"l1Tol2Times",align:"center",render:(a,f)=>a===null?l.jsx(I,{}):a,className:""},"l1Tol2Tx"),l.jsx(k,{title:"L2->L1",dataIndex:"l2Tol1Times",align:"center",render:(a,f)=>a===null?l.jsx(I,{}):a,className:""},"l2Tol1Tx")]}),l.jsxs(ae,{title:"官方桥跨链金额(ETH)",className:"",children:[l.jsx(k,{title:"L1->L2",dataIndex:"l1Tol2Amount",align:"center",render:(a,f)=>a===null?l.jsx(I,{}):a,className:""},"l1Tol2Amount"),l.jsx(k,{title:"L2->L1",dataIndex:"l2Tol1Amount",align:"center",render:(a,f)=>a===null?l.jsx(I,{}):a,className:""},"l2Tol1Amount")]})]}),l.jsx(k,{className:"action",title:"操作",align:"center",render:(a,f)=>l.jsx(rt,{size:"small",children:l.jsx(D,{type:"primary",danger:!0,onClick:()=>$e(f.key),children:"删除"})})},"action")]})}),l.jsx(qe,{children:l.jsxs("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",gap:"10px"},children:[l.jsx(D,{type:"primary",onClick:ve,size:"large",style:{width:"20%"},icon:l.jsx(Xe,{}),children:"添加地址"}),l.jsx(D,{type:"primary",onClick:De,size:"large",style:{width:"20%"},icon:l.jsx(We,{}),children:"批量添加地址"}),l.jsx(D,{type:"primary",onClick:Ce,loading:B,size:"large",style:{width:"20%"},disabled:!o.length,icon:l.jsx(Ye,{}),children:"刷新选中地址"}),l.jsx(D,{type:"primary",danger:!0,onClick:Ve,size:"large",style:{width:"20%"},disabled:!o.length,icon:l.jsx(et,{}),children:"删除选中地址"}),l.jsx(D,{type:"primary",icon:l.jsx(tt,{}),size:"large",style:{width:"8%"},onClick:Re})]})})]})})}export{jt as default};
