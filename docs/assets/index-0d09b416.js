var Ze=Object.defineProperty;var Ke=(t,e,s)=>e in t?Ze(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var he=(t,e,s)=>(Ke(t,typeof e!="symbol"?e+"":e,s),s),ge=(t,e,s)=>{if(!e.has(t))throw TypeError("Cannot "+s)};var m=(t,e,s)=>(ge(t,e,"read from private field"),s?s.call(t):e.get(t)),E=(t,e,s)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,s)},ce=(t,e,s,n)=>(ge(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s);var p=(t,e,s)=>(ge(t,e,"access private method"),s);import{r as L,j as o}from"./index-f2e19821.js";import{a as M,F as J,b as we,I as de,S as I,c as Ae,T as qe,B as v,E as Ge,d as Xe,C as Qe,D as We,L as Ye,n as $,e as et}from"./save_excel-2e50c88f.js";const tt={ethereum:"https://eth.llamarpc.com",optimism:"https://optimism-mainnet.public.blastapi.io",arbitrum:"https://rpc.ankr.com/arbitrum",polygon:"https://polygon-bor.publicnode.com",bsc:"https://bscrpc.com"};async function X(t,e){try{let s=tt[e];if(!s)return"Error: Invalid Network Name";let r=(await M.post(s,{jsonrpc:"2.0",method:"eth_getBalance",params:[t,"latest"],id:1})).data.result;return(parseInt(r,16)/10**18).toFixed(3)}catch(s){return console.error(s),"Error"}}const st={ethereum:"https://eth.llamarpc.com",optimism:"https://optimism-mainnet.public.blastapi.io",arbitrum:"https://rpc.ankr.com/arbitrum",polygon:"https://polygon-bor.publicnode.com",bsc:"https://bscrpc.com"};async function Q(t,e){try{let s=st[e];if(!s)return"Error: Invalid Network Name";const r=(await M.post(s,{jsonrpc:"2.0",method:"eth_getTransactionCount",params:[t,"latest"],id:1})).data.result;return parseInt(r,16)}catch(s){return console.error(s),"Error"}}async function W(t){try{let e="https://zksync2-mainnet-explorer.zksync.io/address/"+t;const s=await M.get(e);let n,r;return"0x0000000000000000000000000000000000000000"in s.data.info.balances?r=(parseInt(s.data.info.balances["0x0000000000000000000000000000000000000000"].balance,16)/10**18).toFixed(3):r=0,n=s.data.info.sealedNonce,{balance2:r,tx2:n}}catch(e){return console.error(e),{balance2:"Error",tx2:"Error"}}}async function Y(t){try{let e="https://api.zksync.io/jsrpc";const s=await M.post(e,{id:1,jsonrpc:"2.0",method:"account_info",params:[t]});let n;"ETH"in s.data.result.committed.balances?n=(s.data.result.committed.balances.ETH/10**18).toFixed(3):n=0;let r=s.data.result.committed.nonce;return{balance1:n,tx1:r}}catch(e){return console.error(e),{balance1:"Error",tx1:"Error"}}}const nt="6.3.0";function rt(t,e,s){const n=e.split("|").map(l=>l.trim());for(let l=0;l<n.length;l++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const r=new Error(`invalid value for type ${e}`);throw r.code="INVALID_ARGUMENT",r.argument=`value.${s}`,r.value=t,r}function Oe(t,e,s){for(let n in e){let r=e[n];const l=s?s[n]:null;l&&rt(r,l,n),Object.defineProperty(t,n,{enumerable:!0,value:r,writable:!1})}}function P(t){if(t==null)return"null";if(Array.isArray(t))return"[ "+t.map(P).join(", ")+" ]";if(t instanceof Uint8Array){const e="0123456789abcdef";let s="0x";for(let n=0;n<t.length;n++)s+=e[t[n]>>4],s+=e[t[n]&15];return s}if(typeof t=="object"&&typeof t.toJSON=="function")return P(t.toJSON());switch(typeof t){case"boolean":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"number":return t.toString();case"string":return JSON.stringify(t);case"object":{const e=Object.keys(t);return e.sort(),"{ "+e.map(s=>`${P(s)}: ${P(t[s])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function at(t,e,s){{const r=[];if(s){if("message"in s||"code"in s||"name"in s)throw new Error(`value will overwrite populated values: ${P(s)}`);for(const l in s){const h=s[l];r.push(l+"="+P(h))}}r.push(`code=${e}`),r.push(`version=${nt}`),r.length&&(t+=" ("+r.join(", ")+")")}let n;switch(e){case"INVALID_ARGUMENT":n=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":n=new RangeError(t);break;default:n=new Error(t)}return Oe(n,{code:e}),s&&Object.assign(n,s),n}function w(t,e,s,n){if(!t)throw at(e,s,n)}function b(t,e,s,n){w(t,e,"INVALID_ARGUMENT",{argument:s,value:n})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"){const s=String.fromCharCode(233).normalize("NFD"),n=String.fromCharCode(101,769);if(s!==n)throw new Error("broken")}t.push(e)}catch{}return t},[]);function it(t,e,s){if(s==null&&(s=""),t!==e){let n=s,r="new";s&&(n+=".",r+=" "+s),w(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:r})}}function ot(t,e,s){if(t instanceof Uint8Array)return s?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x([0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((t.length-2)/2);let r=2;for(let l=0;l<n.length;l++)n[l]=parseInt(t.substring(r,r+2),16),r+=2;return n}b(!1,"invalid BytesLike value",e||"value",t)}function lt(t,e){return ot(t,e,!1)}const Be=BigInt(0),H=BigInt(1),Z=9007199254740991;function pe(t,e){const s=Fe(t,"value"),n=BigInt(ue(e,"width"));if(w(s>>n===Be,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),s>>n-H){const r=(H<<n)-H;return-((~s&r)+H)}return s}function Ne(t,e){const s=Fe(t,"value"),n=BigInt(ue(e,"bits"));return s&(H<<n)-H}function Te(t,e){switch(typeof t){case"bigint":return t;case"number":return b(Number.isInteger(t),"underflow",e||"value",t),b(t>=-Z&&t<=Z,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(s){b(!1,`invalid BigNumberish string: ${s.message}`,e||"value",t)}}b(!1,"invalid BigNumberish value",e||"value",t)}function Fe(t,e){const s=Te(t,e);return w(s>=Be,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),s}const ze="0123456789abcdef";function ct(t){if(t instanceof Uint8Array){let e="0x0";for(const s of t)e+=ze[s>>4],e+=ze[s&15];return BigInt(e)}return Te(t)}function ue(t,e){switch(typeof t){case"bigint":return b(t>=-Z&&t<=Z,"overflow",e||"value",t),Number(t);case"number":return b(Number.isInteger(t),"underflow",e||"value",t),b(t>=-Z&&t<=Z,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return ue(BigInt(t),e)}catch(s){b(!1,`invalid numeric string: ${s.message}`,e||"value",t)}}b(!1,"invalid numeric value",e||"value",t)}const dt=BigInt(-1),N=BigInt(0),K=BigInt(1),ut=BigInt(5),V={};let q="0000";for(;q.length<80;)q+=q;function D(t){let e=q;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function ee(t,e,s){const n=BigInt(e.width);if(e.signed){const r=K<<n-K;w(s==null||t>=-r&&t<r,"overflow","NUMERIC_FAULT",{operation:s,fault:"overflow",value:t}),t>N?t=pe(Ne(t,n),n):t=-pe(Ne(-t,n),n)}else{const r=K<<n;w(s==null||t>=0&&t<r,"overflow","NUMERIC_FAULT",{operation:s,fault:"overflow",value:t}),t=(t%r+r)%r&r-K}return t}function xe(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,s=128,n=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const l=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);b(l,"invalid fixed format","format",t),e=l[1]!=="u",s=parseInt(l[2]),n=parseInt(l[3])}}else if(t){const l=t,h=(y,C,T)=>l[y]==null?T:(b(typeof l[y]===C,"invalid fixed format ("+y+" not "+C+")","format."+y,l[y]),l[y]);e=h("signed","boolean",e),s=h("width","number",s),n=h("decimals","number",n)}b(s%8===0,"invalid FixedNumber width (not byte aligned)","format.width",s),b(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const r=(e?"":"u")+"fixed"+String(s)+"x"+String(n);return{signed:e,width:s,decimals:n,name:r}}function mt(t,e){let s="";t<N&&(s="-",t*=dt);let n=t.toString();if(e===0)return s+n;for(;n.length<=e;)n=q+n;const r=n.length-e;for(n=n.substring(0,r)+"."+n.substring(r);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return s+n}var z,x,k,B,R,j,O,re,be,ae,_e,ie,ke,oe,Se;const U=class{constructor(e,s,n){E(this,B);E(this,j);E(this,re);E(this,ae);E(this,ie);E(this,oe);he(this,"format");E(this,z,void 0);E(this,x,void 0);E(this,k,void 0);he(this,"_value");it(e,V,"FixedNumber"),ce(this,x,s),ce(this,z,n);const r=mt(s,n.decimals);Oe(this,{format:n.name,_value:r}),ce(this,k,D(n.decimals))}get signed(){return m(this,z).signed}get width(){return m(this,z).width}get decimals(){return m(this,z).decimals}get value(){return m(this,x)}addUnsafe(e){return p(this,re,be).call(this,e)}add(e){return p(this,re,be).call(this,e,"add")}subUnsafe(e){return p(this,ae,_e).call(this,e)}sub(e){return p(this,ae,_e).call(this,e,"sub")}mulUnsafe(e){return p(this,ie,ke).call(this,e)}mul(e){return p(this,ie,ke).call(this,e,"mul")}mulSignal(e){p(this,B,R).call(this,e);const s=m(this,x)*m(e,x);return w(s%m(this,k)===N,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),p(this,j,O).call(this,s/m(this,k),"mulSignal")}divUnsafe(e){return p(this,oe,Se).call(this,e)}div(e){return p(this,oe,Se).call(this,e,"div")}divSignal(e){w(m(e,x)!==N,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),p(this,B,R).call(this,e);const s=m(this,x)*m(this,k);return w(s%m(e,x)===N,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),p(this,j,O).call(this,s/m(e,x),"divSignal")}cmp(e){let s=this.value,n=e.value;const r=this.decimals-e.decimals;return r>0?n*=D(r):r<0&&(s*=D(-r)),s<n||s>n?-1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=m(this,x);return m(this,x)<N&&(e-=m(this,k)-K),e=m(this,x)/m(this,k)*m(this,k),p(this,j,O).call(this,e,"floor")}ceiling(){let e=m(this,x);return m(this,x)>N&&(e+=m(this,k)-K),e=m(this,x)/m(this,k)*m(this,k),p(this,j,O).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const s=this.decimals-e,n=ut*D(s-1);let r=this.value+n;const l=D(s);return r=r/l*l,ee(r,m(this,z),"round"),new U(V,r,m(this,z))}isZero(){return m(this,x)===N}isNegative(){return m(this,x)<N}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return U.fromString(this.toString(),e)}static fromValue(e,s,n){s==null&&(s=0);const r=xe(n);let l=Te(e,"value");const h=s-r.decimals;if(h>0){const y=D(h);w(l%y===N,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),l/=y}else h<0&&(l*=D(-h));return ee(l,r,"fromValue"),new U(V,l,r)}static fromString(e,s){const n=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);b(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",e);const r=xe(s);let l=n[2]||"0",h=n[3]||"";for(;h.length<r.decimals;)h+=q;w(h.substring(r.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),h=h.substring(0,r.decimals);const y=BigInt(n[1]+l+h);return ee(y,r,"fromString"),new U(V,y,r)}static fromBytes(e,s){let n=ct(lt(e,"value"));const r=xe(s);return r.signed&&(n=pe(n,r.width)),ee(n,r,"fromBytes"),new U(V,n,r)}};let ye=U;z=new WeakMap,x=new WeakMap,k=new WeakMap,B=new WeakSet,R=function(e){b(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},j=new WeakSet,O=function(e,s){return e=ee(e,m(this,z),s),new U(V,e,m(this,z))},re=new WeakSet,be=function(e,s){return p(this,B,R).call(this,e),p(this,j,O).call(this,m(this,x)+m(e,x),s)},ae=new WeakSet,_e=function(e,s){return p(this,B,R).call(this,e),p(this,j,O).call(this,m(this,x)-m(e,x),s)},ie=new WeakSet,ke=function(e,s){return p(this,B,R).call(this,e),p(this,j,O).call(this,m(this,x)*m(e,x)/m(this,k),s)},oe=new WeakSet,Se=function(e,s){return w(m(e,x)!==N,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),p(this,B,R).call(this,e),p(this,j,O).call(this,m(this,x)*m(this,k)/m(e,x),s)};const ft=["wei","kwei","mwei","gwei","szabo","finney","ether"];function ht(t,e){let s=18;if(typeof e=="string"){const n=ft.indexOf(e);b(n>=0,"invalid unit","unit",e),s=3*n}else e!=null&&(s=ue(e,"unit"));return ye.fromValue(t,s,{decimals:s}).toString()}function je(t){return ht(t,18)}async function Ee(t,e,s,n,r){for(let l=0;l<t.length;l++)if(t[l].isL1Originated===!0){e++;const h=je(t[l].data.value);s+=parseFloat(h)}else if(t[l].data.contractAddress==="0x000000000000000000000000000000000000800a"){n++;const h=je(t[l].data.value);r+=parseFloat(h)}return[e,s,n,r]}async function te(t){try{let e=0,s=0,n=0,r=0,l=0,h=null,y=null;const C="https://zksync2-mainnet-explorer.zksync.io/transactions?limit=100&direction=older&accountAddress="+t,T=await M.get(C),A=T.data.total;if([e,s,n,r]=await Ee(T.data.list,e,s,n,r),A>100)for(h=T.data.list[0].blockNumber,y=T.data.list[0].indexInBlock;;){let F=`https://zksync2-mainnet-explorer.zksync.io/transactions?limit=100&direction=older&accountAddress=${t}`;h!==void 0&&y!==void 0&&l!==0&&(F+=`&fromBlockNumber=${h}&fromTxIndex=${y}&offset=${l}`);const le=await M.get(F),G=le.data.list.length;if([e,s,n,r]=await Ee(le.data.list,e,s,n,r),G===100)l+=G;else break}return{l1Tol2Times:e,l1Tol2Amount:s.toFixed(3),l2Tol1Times:n,l2Tol1Amount:r.toFixed(3)}}catch(e){return console.log(e),{l1Tol2Times:"Error",l1Tol2Amount:"Error",l2Tol1Times:"Error",l2Tol1Amount:"Error"}}}async function se(t){const e="https://zksync2-mainnet-explorer.zksync.io/transactions?limit=5&direction=older&accountAddress="+t;try{const s=await M.get(e);if(s.data.total===0)return{zkSyncLastTx:"无交易"};{const n=s.data.list[0].receivedAt,r=new Date(n),l=8,h=new Date(r.getTime()+l*3600*1e3),y=new Date,T=new Date(y.getTime()+l*3600*1e3)-h,A=Math.floor(T/(1e3*60*60)),F=Math.floor(A/24);return F>0?{zkSyncLastTx:`${F} 天前`}:A>0?{zkSyncLastTx:`${A} 小时前`}:{zkSyncLastTx:"刚刚"}}}catch(s){return console.error(s),{zkSyncLastTx:"Error"}}}const{Content:gt}=Ye,{TextArea:xt}=de,{Column:S,ColumnGroup:ne}=Ae;function _t(){const[t,e]=L.useState([]),[s,n]=L.useState(!1),[r]=J.useForm(),[l,h]=L.useState([]),[y]=J.useForm(),[C,T]=L.useState(!1),[A,F]=L.useState(!1),[le,G]=L.useState(!1),Le=async()=>{try{const a=await y.validateFields();if(a.address.length!==42){$.error({message:"错误",description:"请输入正确的地址"},2);return}T(!1);const f=t.findIndex(c=>c.address===a.address);if(f!==-1){e(t.map((i,u)=>u===f?{...i,name:a.name}:i));const c=[...t];W(a.address).then(({balance2:i,tx2:u})=>{c[f]={...c[f],zks2_balance:i,zks2_tx_amount:u},e(c),localStorage.setItem("addresses",JSON.stringify(t))}),se(a.address).then(({zkSyncLastTx:i})=>{c[f]={...c[f],zks2_last_tx:i},e(c),localStorage.setItem("addresses",JSON.stringify(t))}),Y(a.address).then(({balance1:i,tx1:u})=>{c[f]={...c[f],zks1_balance:i,zks1_tx_amount:u},e(c),localStorage.setItem("addresses",JSON.stringify(t))}),X(a.address,"ethereum").then(i=>{c[f]={...c[f],eth_balance:i},e(c),localStorage.setItem("addresses",JSON.stringify(t))}),Q(a.address,"ethereum").then(i=>{c[f]={...c[f],eth_tx_amount:i},e(c),localStorage.setItem("addresses",JSON.stringify(t))}),te(a.address).then(({l1Tol2Times:i,l1Tol2Amount:u,l2Tol1Times:d,l2Tol1Amount:g})=>{c[f]={...c[f],l1Tol2Times:i,l1Tol2Amount:u,l2Tol1Times:d,l2Tol1Amount:g},e(c),localStorage.setItem("addresses",JSON.stringify(t))})}else{const c={key:t.length.toString(),name:a.name,address:a.address,eth_balance:null,eth_tx_amount:null,zks2_balance:null,zks2_tx_amount:null,zks2_last_tx:null,zks1_balance:null,zks1_tx_amount:null,l1Tol2Times:null,l1Tol2Amount:null,l2Tol1Times:null,l2Tol1Amount:null},i=[...t,c];e(i),W(a.address).then(({balance2:u,tx2:d})=>{c.zks2_balance=u,c.zks2_tx_amount=d,e([...i]),localStorage.setItem("addresses",JSON.stringify(i))}),se(a.address).then(({zkSyncLastTx:u})=>{c.zks2_last_tx=u,e([...i]),localStorage.setItem("addresses",JSON.stringify(i))}),Y(a.address).then(({balance1:u,tx1:d})=>{c.zks1_balance=u,c.zks1_tx_amount=d,e([...i]),localStorage.setItem("addresses",JSON.stringify(i))}),X(a.address,"ethereum").then(u=>{c.eth_balance=u,e([...i]),localStorage.setItem("addresses",JSON.stringify(i))}),Q(a.address,"ethereum").then(u=>{c.eth_tx_amount=u,e([...i]),localStorage.setItem("addresses",JSON.stringify(i))}),te(a.address).then(({l1Tol2Times:u,l1Tol2Amount:d,l2Tol1Times:g,l2Tol1Amount:_})=>{c.l1Tol2Times=u,c.l1Tol2Amount=d,c.l2Tol1Times=g,c.l2Tol1Amount=_,e([...i]),localStorage.setItem("addresses",JSON.stringify(i))})}}catch(a){$.error({message:"错误",description:a.message},2)}finally{y.resetFields()}},Ue=async()=>{if(!l.length){$.error({message:"错误",description:"请先选择要刷新的地址"},2);return}F(!0);try{const a=[...t];for(let f of l){const c=a.findIndex(i=>i.key===f);if(c!==-1){const i=a[c];i.eth_balance=null,i.eth_tx_amount=null,i.zks1_balance=null,i.zks1_tx_amount=null,i.zks2_balance=null,i.zks2_tx_amount=null,i.zks2_last_tx=null,i.l1Tol2Times=null,i.l1Tol2Amount=null,i.l2Tol1Times=null,i.l2Tol1Amount=null,e([...a]),W(i.address).then(({balance2:u,tx2:d})=>{i.zks2_balance=u,i.zks2_tx_amount=d,e([...a]),localStorage.setItem("addresses",JSON.stringify(t))}),se(i.address).then(({zkSyncLastTx:u})=>{i.zks2_last_tx=u,e([...a]),localStorage.setItem("addresses",JSON.stringify(t))}),Y(i.address).then(({balance1:u,tx1:d})=>{i.zks1_balance=u,i.zks1_tx_amount=d,e([...a]),localStorage.setItem("addresses",JSON.stringify(t))}),X(i.address,"ethereum").then(u=>{i.eth_balance=u,e([...a]),localStorage.setItem("addresses",JSON.stringify(t))}),Q(i.address,"ethereum").then(u=>{i.eth_tx_amount=u,e([...a]),localStorage.setItem("addresses",JSON.stringify(t))}),te(i.address).then(({l1Tol2Times:u,l1Tol2Amount:d,l2Tol1Times:g,l2Tol1Amount:_})=>{i.l1Tol2Times=u,i.l1Tol2Amount=d,i.l2Tol1Times=g,i.l2Tol1Amount=_,e([...a]),localStorage.setItem("addresses",JSON.stringify(t))})}}}catch(a){$.error({message:"错误",description:a.message},2)}finally{F(!1)}},Ce=async()=>{try{const f=(await r.validateFields()).addresses.split(`
`),c=[...t];for(let i of f){if(i=i.trim(),i.length!==42){$.error({message:"错误",description:"请输入正确的地址"});continue}const u=c.findIndex(d=>d.address===i);if(u!==-1){const d=[...c];W(i).then(({balance2:g,tx2:_})=>{d[u]={...d[u],zks2_balance:g,zks2_tx_amount:_},e(d),localStorage.setItem("addresses",JSON.stringify(d))}),se(i).then(({zkSyncLastTx:g})=>{d[u]={...d[u],zks2_last_tx:g},e(d),localStorage.setItem("addresses",JSON.stringify(d))}),Y(i).then(({balance1:g,tx1:_})=>{d[u]={...d[u],zks1_balance:g,zks1_tx_amount:_},e(d),localStorage.setItem("addresses",JSON.stringify(d))}),X(i,"ethereum").then(g=>{d[u]={...d[u],eth_balance:g},e(d),localStorage.setItem("addresses",JSON.stringify(d))}),Q(i,"ethereum").then(g=>{d[u]={...d[u],eth_tx_amount:g},e(d),localStorage.setItem("addresses",JSON.stringify(d))}),te(i).then(({l1Tol2Times:g,l1Tol2Amount:_,l2Tol1Times:me,l2Tol1Amount:fe})=>{d[u]={...d[u],l1Tol2Times:g,l1Tol2Amount:_,l2Tol1Times:me,l2Tol1Amount:fe},e(d),localStorage.setItem("addresses",JSON.stringify(d))})}else{const d={key:c.length.toString(),address:i,eth_balance:null,eth_tx_amount:null,zks2_balance:null,zks2_tx_amount:null,zks1_balance:null,zks1_tx_amount:null,zks2_last_tx:null,l1Tol2Times:null,l1Tol2Amount:null,l2Tol1Times:null,l2Tol1Amount:null};c.push(d),e(c),W(i).then(({balance2:g,tx2:_})=>{d.zks2_balance=g,d.zks2_tx_amount=_,e([...c]),localStorage.setItem("addresses",JSON.stringify(c))}),se(i).then(({zkSyncLastTx:g})=>{d.zks2_last_tx=g,e([...c]),localStorage.setItem("addresses",JSON.stringify(c))}),Y(i).then(({balance1:g,tx1:_})=>{d.zks1_balance=g,d.zks1_tx_amount=_,e([...c]),localStorage.setItem("addresses",JSON.stringify(c))}),X(i,"ethereum").then(g=>{d.eth_balance=g,e([...c]),localStorage.setItem("addresses",JSON.stringify(c))}),Q(i,"ethereum").then(g=>{d.eth_tx_amount=g,e([...c]),localStorage.setItem("addresses",JSON.stringify(c))}),te(i).then(({l1Tol2Times:g,l1Tol2Amount:_,l2Tol1Times:me,l2Tol1Amount:fe})=>{d.l1Tol2Times=g,d.l1Tol2Amount=_,d.l2Tol1Times=me,d.l2Tol1Amount=fe,e([...c]),localStorage.setItem("addresses",JSON.stringify(c))})}}n(!1)}catch(a){$.error({message:"错误",description:a.message})}finally{r.resetFields()}},Je=()=>{T(!0)},ve=()=>{n(!0)},De=()=>{et(t,"walletInfo")};L.useEffect(()=>{G(!0);const a=localStorage.getItem("addresses");setTimeout(()=>{G(!1)},500),a&&e(JSON.parse(a))},[]);const Re=()=>{T(!1)},Me=a=>{e(t.filter(f=>f.key!==a)),localStorage.setItem("addresses",JSON.stringify(t.filter(f=>f.key!==a)))},$e=()=>{e(t.filter(a=>!l.includes(a.key))),localStorage.setItem("addresses",JSON.stringify(t.filter(a=>!l.includes(a.key)))),h([])},Ve={onChange:(a,f)=>{h(a)}},Pe=()=>{n(!1)},[He,Ie]=L.useState(null);return o.jsx("div",{children:o.jsxs(gt,{children:[o.jsx(we,{title:"批量添加地址",open:s,onOk:Ce,onCancel:Pe,okButtonProps:{loading:A},okText:"添加地址",cancelText:"取消",children:o.jsx(J,{form:r,layout:"vertical",children:o.jsx(J.Item,{label:"地址",name:"addresses",rules:[{required:!0}],children:o.jsx(xt,{placeholder:"请输入地址，每行一个"})})})}),o.jsx(we,{title:"添加地址",open:C,onOk:Le,onCancel:Re,okButtonProps:{loading:A},okText:"添加地址",cancelText:"取消",children:o.jsxs(J,{form:y,layout:"vertical",children:[o.jsx(J.Item,{label:"地址",name:"address",rules:[{required:!0}],children:o.jsx(de,{placeholder:"请输入地址"})}),o.jsx(J.Item,{label:"备注",name:"name",rules:[{required:!0}],children:o.jsx(de,{placeholder:"请输入备注"})})]})}),o.jsx(I,{spinning:le,children:o.jsxs(Ae,{rowSelection:{type:"checkbox",...Ve},dataSource:t,pagination:!1,bordered:!0,style:{marginBottom:"20px"},size:"small",children:[o.jsx(S,{title:"备注",dataIndex:"name",align:"center",className:"name",render:(a,f)=>f.key===He?o.jsx(de,{placeholder:"请输入备注",defaultValue:a,onPressEnter:i=>{f.name=i.target.value,e([...t]),localStorage.setItem("addresses",JSON.stringify(t)),Ie(null)}}):o.jsxs(o.Fragment,{children:[o.jsx(qe,{color:"blue",children:a}),o.jsx(v,{shape:"circle",icon:o.jsx(Ge,{}),size:"small",onClick:()=>Ie(f.key)})]})},"name"),o.jsx(S,{title:"钱包地址",dataIndex:"address",align:"center",className:"address"},"address"),o.jsxs(ne,{title:"ETH",className:"eth",children:[o.jsx(S,{title:"ETH",dataIndex:"eth_balance",align:"center",render:(a,f)=>a===null?o.jsx(I,{}):a,className:"eth_son"},"eth_balance"),o.jsx(S,{title:"Tx",dataIndex:"eth_tx_amount",align:"center",render:(a,f)=>a===null?o.jsx(I,{}):a,className:"eth_son"},"eth_tx_amount")]}),o.jsxs(ne,{title:"zkSyncLite",className:"zksync1",children:[o.jsx(S,{title:"ETH",dataIndex:"zks1_balance",align:"center",render:(a,f)=>a===null?o.jsx(I,{}):a,className:"zks1_son"},"zks1_balance"),o.jsx(S,{title:"Tx",dataIndex:"zks1_tx_amount",align:"center",render:(a,f)=>a===null?o.jsx(I,{}):a,className:"zks1_son"},"zks1_tx_amount")]}),o.jsxs(ne,{title:"zkSyncEra",className:"zksync2",children:[o.jsx(S,{title:"ETH",dataIndex:"zks2_balance",align:"center",render:(a,f)=>a===null?o.jsx(I,{}):a,className:"zks2_son"},"zks2_balance"),o.jsx(S,{title:"Tx",dataIndex:"zks2_tx_amount",align:"center",render:(a,f)=>a===null?o.jsx(I,{}):a,className:"zks2_son"},"zks2_tx_amount"),o.jsx(S,{title:"最后交易",dataIndex:"zks2_last_tx",align:"center",render:(a,f)=>a===null?o.jsx(I,{}):o.jsx("a",{href:"https://explorer.zksync.io/address/"+f.address,target:"_blank",children:a}),className:"zks2_son"},"zks2_last_tx"),o.jsxs(ne,{title:"官方桥跨链Tx数",className:"cross",children:[o.jsx(S,{title:"L1->L2",dataIndex:"l1Tol2Times",align:"center",render:(a,f)=>a===null?o.jsx(I,{}):a,className:"cross_son"},"l1Tol2Tx"),o.jsx(S,{title:"L2->L1",dataIndex:"l2Tol1Times",align:"center",render:(a,f)=>a===null?o.jsx(I,{}):a,className:"cross_son"},"l2Tol1Tx")]}),o.jsxs(ne,{title:"官方桥跨链金额(ETH)",className:"cross",children:[o.jsx(S,{title:"L1->L2",dataIndex:"l1Tol2Amount",align:"center",render:(a,f)=>a===null?o.jsx(I,{}):a,className:"cross_son"},"l1Tol2Amount"),o.jsx(S,{title:"L2->L1",dataIndex:"l2Tol1Amount",align:"center",render:(a,f)=>a===null?o.jsx(I,{}):a,className:"cross_son"},"l2Tol1Amount")]})]}),o.jsx(S,{className:"action",title:"操作",align:"center",render:(a,f)=>o.jsx(Xe,{size:"small",children:o.jsx(v,{type:"primary",danger:!0,onClick:()=>Me(f.key),children:"删除"})})},"action")]})}),o.jsx(Qe,{children:o.jsxs("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"},children:[o.jsx(v,{type:"primary",onClick:Je,size:"large",style:{width:"20%"},children:"添加地址"}),o.jsx(v,{type:"primary",onClick:ve,size:"large",style:{width:"20%"},children:"批量添加地址"}),o.jsx(v,{type:"primary",onClick:Ue,loading:A,size:"large",style:{width:"20%"},disabled:!l.length,children:"刷新选中地址"}),o.jsx(v,{type:"primary",danger:!0,onClick:$e,size:"large",style:{width:"20%"},disabled:!l.length,children:"删除选中地址"}),o.jsx(v,{type:"primary",icon:o.jsx(We,{}),size:"large",style:{width:"8%"},onClick:De})]})})]})})}export{_t as default};
