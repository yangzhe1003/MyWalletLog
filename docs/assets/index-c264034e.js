var Ut=Object.defineProperty;var Mt=(t,n,e)=>n in t?Ut(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var we=(t,n,e)=>(Mt(t,typeof n!="symbol"?n+"":n,e),e),Ae=(t,n,e)=>{if(!n.has(t))throw TypeError("Cannot "+e)};var f=(t,n,e)=>(Ae(t,n,"read from private field"),e?e.call(t):n.get(t)),M=(t,n,e)=>{if(n.has(t))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(t):n.set(t,e)},xe=(t,n,e,r)=>(Ae(t,n,"write to private field"),r?r.call(t,e):n.set(t,e),e);var y=(t,n,e)=>(Ae(t,n,"access private method"),e);import{r as v,A as $t,_ as We,a as W,i as O,j as o,T as De,M as Ee,b as Q,B as V,c as m,F as Se,P as Ie,I as ht,E as Je,S as ze,C as Rt,d as Vt,e as Ge,D as qe,f as Ht,R as Zt,g as Wt,h as Jt,U as Gt,k as qt,L as Kt,n as te,l as Yt,m as Qt,o as Xt}from"./index-c3ce6ac5.js";import{g as es}from"./getEthPrice-67484e9d.js";import{i as Oe,d as Ue,u as yt,g as ts}from"./main-4b572464.js";import{u as gt}from"./useTranslation-426936ff.js";import{I as ss}from"./index-5e99e5c0.js";import{d as ke}from"./deleteData-50a250eb.js";import{T as ns}from"./index-6dfe59fc.js";var rs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zm52 132H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"appstore-add",theme:"outlined"};const as=rs;var xt=function(n,e){return v.createElement($t,We(We({},n),{},{ref:e,icon:as}))};xt.displayName="AppstoreAddOutlined";const is=v.forwardRef(xt);const os=async t=>{let n=`https://block-explorer-api.mainnet.zksync.io/address/${t}/transfers?limit=100&page=1`;const e=[];for(;;)try{const r=await W.get(n);if(r.status===200){const a=r.data.items;if(e.push(...a),r.data.links.next==="")break;n="https://block-explorer-api.mainnet.zksync.io/"+r.data.links.next}else{console.error("Error occurred while retrieving transactions.");break}}catch(r){console.error("Error occurred while making the request:",r);break}return e},cs=async t=>{const n=await W.post("https://mainnet.era.zksync.io/",{id:42,jsonrpc:"2.0",method:"zks_getTokenPrice",params:["0x0000000000000000000000000000000000000000"]}),e={USDC:1,USDT:1,ZKUSD:1,CEBUSD:1,LUSD:1,ETH:parseInt(n.data.result)};t.forEach(r=>{r.transfers.forEach(a=>{a.token.price=e[a.token.symbol.toUpperCase()]}),r.transfers=r.transfers.filter(a=>a.token.price!==void 0)})},ls=async t=>{let n=`https://block-explorer-api.mainnet.zksync.io/transactions?address=${t}&limit=100&page=1`;const e=[],r=await es();for(;;)try{const i=await W.get(n);if(i.status===200){if(i.data.items.forEach(u=>{const{hash:h,to:x,from:k,data:C,isL1Originated:D,fee:J,receivedAt:ee,value:re}=u;e.push({hash:h,to:x,from:k,data:C,isL1Originated:D,fee:J,receivedAt:ee,transfers:[],ethValue:parseInt(r),value:re})}),i.data.links.next==="")break;n="https://block-explorer-api.mainnet.zksync.io/"+i.data.links.next}else{console.error("Error occurred while retrieving transactions.");break}}catch(i){console.error("Error occurred while making the request:",i);break}return(await os(t)).forEach(i=>{i.token!==null&&e.forEach(c=>{c.hash===i.transactionHash&&c.transfers.push(i)})}),await cs(e),await Oe(Ue),await yt("zkTransactions",{address:t,data:JSON.stringify(e)}),e},ds=async t=>{let n=0;return t.forEach(e=>{const r=parseInt(e.fee,16)*1e-18*e.ethValue;n+=r}),n===0?0:n.toFixed(2)},us=t=>{let n=0;return t.forEach(e=>{const r=e.transfers.sort((i,c)=>parseInt(c.amount)*10**-c.token.decimals*c.token.price-parseInt(i.amount)*10**-i.token.decimals*i.token.price);if(r.length===0)return;const a=parseInt(r[0].amount)*10**-r[0].token.decimals*r[0].token.price;n+=a}),n===0?0:n.toFixed(2)},fs=t=>{const n=(new Date().getTime()-new Date(t).getTime())/1e3;if(n<60)return O.t("secondsAgo",{count:Math.round(n)});const e=n/60;if(e<60)return O.t("minutesAgo",{count:Math.round(e)});const r=e/60;if(r<24)return O.t("hoursAgo",{count:Math.round(r)});const a=r/24;return O.t("daysAgo",{count:Math.round(a)})},ms=t=>{const n=t.getFullYear(),e=new Date(n,0,1),r=(t.getDay()+6)%7,a=Math.floor((t.getTime()-e.getTime())/864e5),i=Math.floor((a+e.getDay()-r)/7);return`${n}-${i}`},ps=(t,n)=>{const e=new Set,r=new Set,a=new Set,i=new Set;return n.forEach(c=>{if(c.from.toLowerCase()!==t.toLowerCase())return;const u=new Date(c.receivedAt),h=u.getFullYear(),x=u.getMonth(),k=u.getDate(),C=ms(u);e.add(`${h}-${x}-${k}`),r.add(`${h}-${C}`),a.add(`${h}-${x}`),i.add(c.to)}),{dayActivity:e.size,weekActivity:r.size,monthActivity:a.size,contractActivity:i.size}},hs=async(t,n)=>{if(n.length===0)return{dayActivity:0,weekActivity:0,monthActivity:0,contractActivity:0,zks2_last_tx:O.t("noTransaction")};const{dayActivity:e,weekActivity:r,monthActivity:a,contractActivity:i}=ps(t,n),c=n[0],u=fs(c.receivedAt)||O.t("noTransaction");return{dayActivity:e,weekActivity:r,monthActivity:a,contractActivity:i,zks2_last_tx:u}};async function ys(t){try{let n="https://block-explorer-api.mainnet.zksync.io/address/"+t;const e=await W.get(n);let r,a,i;return"0x000000000000000000000000000000000000800A"in e.data.balances?(a=e.data.balances["0x000000000000000000000000000000000000800A"].balance,a=(Number(a)/10**18).toFixed(3)):a=0,"0x3355df6D4c9C3035724Fd0e3914dE96A5a83aaf4"in e.data.balances?(i=e.data.balances["0x3355df6D4c9C3035724Fd0e3914dE96A5a83aaf4"].balance,i=(Number(i)/10**6).toFixed(2)):i=0,r=e.data.sealedNonce,{zks2_balance:a,zks2_tx_amount:r,zks2_usdcBalance:i}}catch(n){return console.error(n),{zks2_balance:"-",zks2_tx_amount:"-",zks2_usdcBalance:"-"}}}const gs=t=>{const n=(new Date().getTime()-new Date(t).getTime())/1e3;if(n<60)return O.t("secondsAgo",{count:Math.round(n)});const e=n/60;if(e<60)return O.t("minutesAgo",{count:Math.round(e)});const r=e/60;if(r<24)return O.t("hoursAgo",{count:Math.round(r)});const a=r/24;return O.t("daysAgo",{count:Math.round(a)})};async function xs(t){try{const e=(await W.get(`https://api.zksync.io/api/v0.2/accounts/${t}/transactions`,{params:{from:"latest",limit:"25",direction:"older"}})).data;return e.result.list.length===0?O.t("noTransaction"):gs(e.result.list[0].createdAt)}catch(n){return console.log(n),"-"}}async function ks(t){try{let n="https://api.zksync.io/jsrpc";const e=await W.post(n,{id:1,jsonrpc:"2.0",method:"account_info",params:[t]});let r;"ETH"in e.data.result.committed.balances?r=(e.data.result.committed.balances.ETH/10**18).toFixed(3):r=0;let a=e.data.result.committed.nonce,i=await xs(t);return{zks1_balance:r,zks1_tx_amount:a,zks1_latest_tx:i}}catch(n){return console.error(n),{zks1_balance:"-",zks1_tx_amount:"-",zks1_latest_tx:"-"}}}const bs={ethereum:"https://cloudflare-eth.com",optimism:"https://optimism-mainnet.public.blastapi.io",arbitrum:"https://rpc.ankr.com/arbitrum",polygon:"https://polygon-bor.publicnode.com",bsc:"https://bscrpc.com"};async function vs(t,n){try{let e=bs[n];if(!e)return"Error: Invalid Network Name";let a=(await W.post(e,{jsonrpc:"2.0",method:"eth_getBalance",params:[t,"latest"],id:1})).data.result;return parseInt(a,16)/10**18===0?0:(parseInt(a,16)/10**18).toFixed(3)}catch(e){return console.error(e),"-"}}const ws={ethereum:"https://cloudflare-eth.com",optimism:"https://optimism-mainnet.public.blastapi.io",arbitrum:"https://rpc.ankr.com/arbitrum",polygon:"https://polygon-bor.publicnode.com",bsc:"https://bscrpc.com"};async function As(t,n){try{let e=ws[n];if(!e)return"Error: Invalid Network Name";const a=(await W.post(e,{jsonrpc:"2.0",method:"eth_getTransactionCount",params:[t,"latest"],id:1})).data.result;return parseInt(a,16)}catch(e){return console.error(e),"Error"}}const Ss="6.3.0";function Is(t,n,e){const r=n.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(n){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===n)return}const a=new Error(`invalid value for type ${n}`);throw a.code="INVALID_ARGUMENT",a.argument=`value.${e}`,a.value=t,a}function kt(t,n,e){for(let r in n){let a=n[r];const i=e?e[r]:null;i&&Is(a,i,r),Object.defineProperty(t,r,{enumerable:!0,value:a,writable:!1})}}function ie(t){if(t==null)return"null";if(Array.isArray(t))return"[ "+t.map(ie).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let e="0x";for(let r=0;r<t.length;r++)e+=n[t[r]>>4],e+=n[t[r]&15];return e}if(typeof t=="object"&&typeof t.toJSON=="function")return ie(t.toJSON());switch(typeof t){case"boolean":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"number":return t.toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(e=>`${ie(e)}: ${ie(t[e])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function zs(t,n,e){{const a=[];if(e){if("message"in e||"code"in e||"name"in e)throw new Error(`value will overwrite populated values: ${ie(e)}`);for(const i in e){const c=e[i];a.push(i+"="+ie(c))}}a.push(`code=${n}`),a.push(`version=${Ss}`),a.length&&(t+=" ("+a.join(", ")+")")}let r;switch(n){case"INVALID_ARGUMENT":r=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(t);break;default:r=new Error(t)}return kt(r,{code:n}),e&&Object.assign(r,e),r}function F(t,n,e,r){if(!t)throw zs(n,e,r)}function w(t,n,e,r){F(t,n,"INVALID_ARGUMENT",{argument:e,value:r})}["NFD","NFC","NFKD","NFKC"].reduce((t,n)=>{try{if("test".normalize(n)!=="test")throw new Error("bad");if(n==="NFD"){const e=String.fromCharCode(233).normalize("NFD"),r=String.fromCharCode(101,769);if(e!==r)throw new Error("broken")}t.push(n)}catch{}return t},[]);function _s(t,n,e){if(e==null&&(e=""),t!==n){let r=e,a="new";e&&(r+=".",a+=" "+e),F(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:a})}}function js(t,n,e){if(t instanceof Uint8Array)return e?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x([0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let a=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(a,a+2),16),a+=2;return r}w(!1,"invalid BytesLike value",n||"value",t)}function Cs(t,n){return js(t,n,!1)}const bt=BigInt(0),oe=BigInt(1),ce=9007199254740991;function Te(t,n){const e=vt(t,"value"),r=BigInt(be(n,"width"));if(F(e>>r===bt,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),e>>r-oe){const a=(oe<<r)-oe;return-((~e&a)+oe)}return e}function Ke(t,n){const e=vt(t,"value"),r=BigInt(be(n,"bits"));return e&(oe<<r)-oe}function Me(t,n){switch(typeof t){case"bigint":return t;case"number":return w(Number.isInteger(t),"underflow",n||"value",t),w(t>=-ce&&t<=ce,"overflow",n||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(e){w(!1,`invalid BigNumberish string: ${e.message}`,n||"value",t)}}w(!1,"invalid BigNumberish value",n||"value",t)}function vt(t,n){const e=Me(t,n);return F(e>=bt,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),e}const Ye="0123456789abcdef";function Ds(t){if(t instanceof Uint8Array){let n="0x0";for(const e of t)n+=Ye[e>>4],n+=Ye[e&15];return BigInt(n)}return Me(t)}function be(t,n){switch(typeof t){case"bigint":return w(t>=-ce&&t<=ce,"overflow",n||"value",t),Number(t);case"number":return w(Number.isInteger(t),"underflow",n||"value",t),w(t>=-ce&&t<=ce,"overflow",n||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return be(BigInt(t),n)}catch(e){w(!1,`invalid numeric string: ${e.message}`,n||"value",t)}}w(!1,"invalid numeric value",n||"value",t)}const Es=BigInt(-1),B=BigInt(0),le=BigInt(1),Ts=BigInt(5),ae={};let de="0000";for(;de.length<80;)de+=de;function se(t){let n=de;for(;n.length<t;)n+=n;return BigInt("1"+n.substring(0,t))}function ue(t,n,e){const r=BigInt(n.width);if(n.signed){const a=le<<r-le;F(e==null||t>=-a&&t<a,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:t}),t>B?t=Te(Ke(t,r),r):t=-Te(Ke(-t,r),r)}else{const a=le<<r;F(e==null||t>=0&&t<a,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:t}),t=(t%a+a)%a&a-le}return t}function _e(t){typeof t=="number"&&(t=`fixed128x${t}`);let n=!0,e=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")n=!1;else{const i=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);w(i,"invalid fixed format","format",t),n=i[1]!=="u",e=parseInt(i[2]),r=parseInt(i[3])}}else if(t){const i=t,c=(u,h,x)=>i[u]==null?x:(w(typeof i[u]===h,"invalid fixed format ("+u+" not "+h+")","format."+u,i[u]),i[u]);n=c("signed","boolean",n),e=c("width","number",e),r=c("decimals","number",r)}w(e%8===0,"invalid FixedNumber width (not byte aligned)","format.width",e),w(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);const a=(n?"":"u")+"fixed"+String(e)+"x"+String(r);return{signed:n,width:e,decimals:r,name:a}}function Ls(t,n){let e="";t<B&&(e="-",t*=Es);let r=t.toString();if(n===0)return e+r;for(;r.length<=n;)r=de+r;const a=r.length-n;for(r=r.substring(0,a)+"."+r.substring(a);r[0]==="0"&&r[1]!==".";)r=r.substring(1);for(;r[r.length-1]==="0"&&r[r.length-2]!==".";)r=r.substring(0,r.length-1);return e+r}var N,p,z,Z,ne,P,H,fe,Fe,me,Be,pe,Ne,he,Pe;const X=class{constructor(n,e,r){M(this,Z);M(this,P);M(this,fe);M(this,me);M(this,pe);M(this,he);we(this,"format");M(this,N,void 0);M(this,p,void 0);M(this,z,void 0);we(this,"_value");_s(n,ae,"FixedNumber"),xe(this,p,e),xe(this,N,r);const a=Ls(e,r.decimals);kt(this,{format:r.name,_value:a}),xe(this,z,se(r.decimals))}get signed(){return f(this,N).signed}get width(){return f(this,N).width}get decimals(){return f(this,N).decimals}get value(){return f(this,p)}addUnsafe(n){return y(this,fe,Fe).call(this,n)}add(n){return y(this,fe,Fe).call(this,n,"add")}subUnsafe(n){return y(this,me,Be).call(this,n)}sub(n){return y(this,me,Be).call(this,n,"sub")}mulUnsafe(n){return y(this,pe,Ne).call(this,n)}mul(n){return y(this,pe,Ne).call(this,n,"mul")}mulSignal(n){y(this,Z,ne).call(this,n);const e=f(this,p)*f(n,p);return F(e%f(this,z)===B,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),y(this,P,H).call(this,e/f(this,z),"mulSignal")}divUnsafe(n){return y(this,he,Pe).call(this,n)}div(n){return y(this,he,Pe).call(this,n,"div")}divSignal(n){F(f(n,p)!==B,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),y(this,Z,ne).call(this,n);const e=f(this,p)*f(this,z);return F(e%f(n,p)===B,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),y(this,P,H).call(this,e/f(n,p),"divSignal")}cmp(n){let e=this.value,r=n.value;const a=this.decimals-n.decimals;return a>0?r*=se(a):a<0&&(e*=se(-a)),e<r||e>r?-1:0}eq(n){return this.cmp(n)===0}lt(n){return this.cmp(n)<0}lte(n){return this.cmp(n)<=0}gt(n){return this.cmp(n)>0}gte(n){return this.cmp(n)>=0}floor(){let n=f(this,p);return f(this,p)<B&&(n-=f(this,z)-le),n=f(this,p)/f(this,z)*f(this,z),y(this,P,H).call(this,n,"floor")}ceiling(){let n=f(this,p);return f(this,p)>B&&(n+=f(this,z)-le),n=f(this,p)/f(this,z)*f(this,z),y(this,P,H).call(this,n,"ceiling")}round(n){if(n==null&&(n=0),n>=this.decimals)return this;const e=this.decimals-n,r=Ts*se(e-1);let a=this.value+r;const i=se(e);return a=a/i*i,ue(a,f(this,N),"round"),new X(ae,a,f(this,N))}isZero(){return f(this,p)===B}isNegative(){return f(this,p)<B}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(n){return X.fromString(this.toString(),n)}static fromValue(n,e,r){e==null&&(e=0);const a=_e(r);let i=Me(n,"value");const c=e-a.decimals;if(c>0){const u=se(c);F(i%u===B,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:n}),i/=u}else c<0&&(i*=se(-c));return ue(i,a,"fromValue"),new X(ae,i,a)}static fromString(n,e){const r=n.match(/^(-?)([0-9]*)\.?([0-9]*)$/);w(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",n);const a=_e(e);let i=r[2]||"0",c=r[3]||"";for(;c.length<a.decimals;)c+=de;F(c.substring(a.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:n}),c=c.substring(0,a.decimals);const u=BigInt(r[1]+i+c);return ue(u,a,"fromString"),new X(ae,u,a)}static fromBytes(n,e){let r=Ds(Cs(n,"value"));const a=_e(e);return a.signed&&(r=Te(r,a.width)),ue(r,a,"fromBytes"),new X(ae,r,a)}};let Le=X;N=new WeakMap,p=new WeakMap,z=new WeakMap,Z=new WeakSet,ne=function(n){w(this.format===n.format,"incompatible format; use fixedNumber.toFormat","other",n)},P=new WeakSet,H=function(n,e){return n=ue(n,f(this,N),e),new X(ae,n,f(this,N))},fe=new WeakSet,Fe=function(n,e){return y(this,Z,ne).call(this,n),y(this,P,H).call(this,f(this,p)+f(n,p),e)},me=new WeakSet,Be=function(n,e){return y(this,Z,ne).call(this,n),y(this,P,H).call(this,f(this,p)-f(n,p),e)},pe=new WeakSet,Ne=function(n,e){return y(this,Z,ne).call(this,n),y(this,P,H).call(this,f(this,p)*f(n,p)/f(this,z),e)},he=new WeakSet,Pe=function(n,e){return F(f(n,p)!==B,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),y(this,Z,ne).call(this,n),y(this,P,H).call(this,f(this,p)*f(this,z)/f(n,p),e)};const Fs=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Bs(t,n){let e=18;if(typeof n=="string"){const r=Fs.indexOf(n);w(r>=0,"invalid unit","unit",n),e=3*r}else n!=null&&(e=be(n,"unit"));return Le.fromValue(t,e,{decimals:e}).toString()}function Qe(t){return Bs(t,18)}const Ns=(t,n)=>{let e=0,r=0,a=0,i=0;return t.forEach(c=>{const u=c.from,h=c.to,x=c.isL1Originated;if(u.toLowerCase()===n.toLowerCase()){if(x){e++;const k=Qe(c.value);r+=parseFloat(k)}if(h.toLowerCase()==="0x000000000000000000000000000000000000800A".toLowerCase()){a++;const k=Qe(c.value);i+=parseFloat(k)}}}),{l1Tol2Times:e,l1Tol2Amount:r===0?0:r.toFixed(3),l2Tol1Times:a,l2Tol1Amount:i===0?0:i.toFixed(3)}},Ps=t=>{const n=t.getFullYear(),e=new Date(n,0,1),r=(t.getDay()+6)%7,a=Math.floor((t.getTime()-e.getTime())/864e5),i=Math.floor((a+e.getDay()-r)/7);return`${n}-${i}`},_=(t,n,e,r=[])=>{const a=new Set,i=new Set,c=new Set;return n.forEach(u=>{if(e!=="zksynceraportal"&&!r.includes(u.to.toLowerCase())&&!r.includes(u.from.toLowerCase())||e==="zksynceraportal"&&!u.data.startsWith("0x51cff8d9")&&!(u.to.toLowerCase()===t.toLowerCase()&&u.isL1Originated))return;const h=new Date(u.receivedAt),x=h.getFullYear(),k=h.getMonth(),C=h.getDate(),D=Ps(h);a.add(`${x}-${k}-${C}`),i.add(`${x}-${D}`),c.add(`${x}-${k}`)}),{days:a.size,weeks:i.size,months:c.size}},Xe="0x2da10a1e27bf85cedd8ffb1abbe97e53391c0295",et=["0x80115c708e12edd42e504c1cd52aea96c547c05c","0x176b23f1ddfeedd10fc250b8f769362492ef810b","0x4e7d2e3f40998daeb59a316148bfbf8efd1f7f3c","0xae092fcec5fd04836b12e87da0d7ed3a707b38b0"],Os={getProtocolsState:(t,n)=>{const e={name:"SyncSwap",id:"syncswap",lastActivity:"",volume:0,interactions:0,activeDays:0,approves:0,url:"https://syncswap.xyz/"};return t.forEach(r=>{if(Xe.includes(r.to.toLowerCase())||et.includes(r.to.toLowerCase())){e.lastActivity===""&&(e.lastActivity=r.receivedAt),new Date(e.lastActivity)<new Date(r.receivedAt)&&(e.lastActivity=r.receivedAt),e.interactions+=1;const a=r.transfers.sort((i,c)=>parseInt(c.amount)*10**-c.token.decimals*c.token.price-parseInt(i.amount)*10**-i.token.decimals*i.token.price);if(a.length===0)return;e.volume+=parseInt(a[0].amount)*10**-a[0].token.decimals*a[0].token.price}}),e.activeDays=_(n,t,e.id,et.concat([Xe])).days,e}},tt=["0xd2ca21df45479824f954a6e1759d436a57d63faf","0x1f090f91ee09768ca36dcd52640f4a5eae146555","0xc523df658dbec88dc03fb23a703bcbd7ffb5ea01","0x116a4a5ed4c7d5712e109d4188e17616d8e5784a","0x8d123a2a0a7c98555931ceda6917b865b7345164"],Us={getProtocolsState:(t,n)=>{const e={name:"Goal3",id:"goal3",lastActivity:"",volume:0,interactions:0,activeDays:0,approves:0,url:"https://beta.goal3.xyz/",tag:"Gasless"};return t.forEach(r=>{if(tt.includes(r.to.toLowerCase())){if(r.data.startsWith("0xbd95e4f1")){const a=parseInt(r.data.slice(-64),16)*1e-6;e.volume+=a}else{const a=r.transfers.sort((i,c)=>parseInt(c.amount)*10**-c.token.decimals*c.token.price-parseInt(i.amount)*10**-i.token.decimals*i.token.price);if(a.length===0)return;e.volume+=parseInt(a[0].amount)*10**-a[0].token.decimals*a[0].token.price}e.interactions+=1,e.lastActivity===""&&(e.lastActivity=r.receivedAt),new Date(e.lastActivity)<new Date(r.receivedAt)&&(e.lastActivity=r.receivedAt)}}),e.activeDays=_(n,t,e.id,tt).days,e}},st=["0x7b4872e2096ec9410b6b8c8b7d039589e6ee8022","0xaf08a9d918f16332f22cf8dc9abe9d9e14ddcbc2"],Ms={getProtocolsState:(t,n)=>{const e={name:"Holdstation",id:"holdstation",lastActivity:"",volume:0,interactions:0,activeDays:0,approves:0,url:"https://holdstation.exchange/"};return t.forEach(r=>{if(st.includes(r.to.toLowerCase())){e.lastActivity===""&&(e.lastActivity=r.receivedAt),new Date(e.lastActivity)<new Date(r.receivedAt)&&(e.lastActivity=r.receivedAt),e.interactions+=1;const a=r.transfers.sort((i,c)=>parseInt(c.amount)*10**-c.token.decimals*c.token.price-parseInt(i.amount)*10**-i.token.decimals*i.token.price);if(a.length===0)return;e.volume+=parseInt(a[0].amount)*10**-a[0].token.decimals*a[0].token.price}}),e.activeDays=_(n,t,e.id,st).days,e}},nt=["0x33d9936b7b7bc155493446b5e6ddc0350eb83aec","0x7499ce9c8f4ff47be5dd5308ab54cc710de751e1","0xbc94aedd2a0a986476b89e072b05e0df117a3f8b","0xc319755dff1601b3d0520b421a281b11bf22e80f","0x8df80089b7ab1646db211d43949ecdfc94582011","0x0066f3791bd9d5a25d88f978dd8e1006445fe0d6","0x377ec7c9ae5a0787f384668788a1654249059dd6","0x3ec82c07981d6d213da9bd35a0ba4cd324fea438","0x9606ec131eec0f84c95d82c9a63959f2331cf2ac","0x936c9a1b8f88bfdbd5066ad08e5d773bc82eb15f","0x8b9d7d609a83b2f69d2135786a7d230043af7283","0x7dee7de9814ed6c1e20b3e4e2fa9b1b96e15fde1"],$s={getProtocolsState:(t,n)=>{const e={name:"iZUMi finance",id:"izumi",lastActivity:"",volume:0,interactions:0,activeDays:0,approves:0,url:"https://izumi.finance/home"};return t.forEach(r=>{if(nt.includes(r.to.toLowerCase())){e.lastActivity===""&&(e.lastActivity=r.receivedAt),new Date(e.lastActivity)<new Date(r.receivedAt)&&(e.lastActivity=r.receivedAt),e.interactions+=1;const a=r.transfers.sort((i,c)=>parseInt(c.amount)*10**-c.token.decimals*c.token.price-parseInt(i.amount)*10**-i.token.decimals*i.token.price);if(a.length===0)return;e.volume+=parseInt(a[0].amount)*10**-a[0].token.decimals*a[0].token.price}}),e.activeDays=_(n,t,e.id,nt).days,e}},rt=["0xfd54762d435a490405dda0fbc92b7168934e8525","0x852639ee9dd090d30271832332501e87d287106c","0x77ee88b1c9cce741ec35553730eb1f19cd45a379","0x39e098a153ad69834a9dac32f0fca92066ad03f4"],Rs={getProtocolsState:(t,n)=>{const e={name:"Maverick",id:"maverick",lastActivity:"",volume:0,interactions:0,activeDays:0,approves:0,url:"https://app.mav.xyz/"};return t.forEach(r=>{if(rt.includes(r.to.toLowerCase())){e.lastActivity===""&&(e.lastActivity=r.receivedAt),new Date(e.lastActivity)<new Date(r.receivedAt)&&(e.lastActivity=r.receivedAt),e.interactions+=1;const a=r.transfers.sort((i,c)=>parseInt(c.amount)*10**-c.token.decimals*c.token.price-parseInt(i.amount)*10**-i.token.decimals*i.token.price);if(a.length===0)return;e.volume+=parseInt(a[0].amount)*10**-a[0].token.decimals*a[0].token.price}}),e.activeDays=_(n,t,e.id,rt).days,e}},at="0x8b791913eb07c32779a16750e3868aa8495f5964",it=["0xdfaab828f5f515e104baaba4d8d554da9096f0e4","0xb85feb6af3412d690dfda280b73eaed73a2315bc"],Vs={getProtocolsState:(t,n)=>{const e={name:"Mute.io",id:"muteio",lastActivity:"",volume:0,interactions:0,activeDays:0,approves:0,url:"https://mute.io/"};return t.forEach(r=>{if(at.includes(r.to.toLowerCase())||it.includes(r.to.toLowerCase())){e.lastActivity===""&&(e.lastActivity=r.receivedAt),new Date(e.lastActivity)<new Date(r.receivedAt)&&(e.lastActivity=r.receivedAt),e.interactions+=1;const a=r.transfers.sort((i,c)=>parseInt(c.amount)*10**-c.token.decimals*c.token.price-parseInt(i.amount)*10**-i.token.decimals*i.token.price);if(a.length===0)return;e.volume+=parseInt(a[0].amount)*10**-a[0].token.decimals*a[0].token.price}}),e.activeDays=_(n,t,e.id,it.concat([at])).days,e}},ot=["0x84c18204c30da662562b7a2c79397c9e05f942f0","0xca806b267fc0c1c12edbf77a2e5bca5939c7d953","0xaa08a6d7b10724d03b8f4857d4fa14e7f92814e3","0x10c8044ae3f2b1c7decb439ff2dc1164d750c39d","0xe676b11421d68a28ba50920f2841183af93067a2","0x6219f06135b79705d34f5261852e9f6b98821e1f"],Hs={getProtocolsState:(t,n)=>{const e={name:"Onchain Trade",id:"onchaintrade",lastActivity:"",volume:0,interactions:0,activeDays:0,approves:0,url:"https://onchain.trade/"};return t.forEach(r=>{if(ot.includes(r.to.toLowerCase())){e.lastActivity===""&&(e.lastActivity=r.receivedAt),new Date(e.lastActivity)<new Date(r.receivedAt)&&(e.lastActivity=r.receivedAt),e.interactions+=1;const a=r.transfers.sort((i,c)=>parseInt(c.amount)*10**-c.token.decimals*c.token.price-parseInt(i.amount)*10**-i.token.decimals*i.token.price);if(a.length===0)return;e.volume+=parseInt(a[0].amount)*10**-a[0].token.decimals*a[0].token.price}}),e.activeDays=_(n,t,e.id,ot).days,e}},je=["0xe4edb277e41dc89ab076a1f049f4a3efa700bce8","0x80c67432656d59144ceff962e8faf8926599bcf8","0xee73323912a4e3772b74ed0ca1595a152b0ef282","0x0a88BC5c32b684D467b43C06D9e0899EfEAF59Df"],Zs={getProtocolsState:(t,n)=>{const e={name:"Orbiter Finance",id:"orbiter",lastActivity:"",volume:0,interactions:0,activeDays:0,approves:0,url:"https://orbiter.finance/"};return t.forEach(r=>{if(je.includes(r.to.toLowerCase())||je.includes(r.from.toLowerCase())){e.lastActivity===""&&(e.lastActivity=r.receivedAt),new Date(e.lastActivity)<new Date(r.receivedAt)&&(e.lastActivity=r.receivedAt),e.interactions+=1;const a=r.transfers.sort((i,c)=>parseInt(c.amount)*10**-c.token.decimals*c.token.price-parseInt(i.amount)*10**-i.token.decimals*i.token.price);if(a.length===0)return;e.volume+=parseInt(a[0].amount)*10**-a[0].token.decimals*a[0].token.price}}),e.activeDays=_(n,t,e.id,je).days,e}},ct=["0xefde2aefe307a7362c7e0e3be019d1491dc7e163","0xba5f1898f3af43e30b552cac559f11f5d5a2fd1e","0xf9895dcb26c60743fce3ae54f506c47b763693bb","0xbbca935fb05d8671b8875293c2d82df73105ac60","0xc8db02c5900de3ed03139e9ec62a84b2f5e06d7f","0xc2e9dfb2fded2139b0b60c6781b4c648f1385c16","0x0ed4a1c66fcdf17341177422e73ca919284e040c","0x015d01187a77055fadb96c63a9de9f8981e3d0f5","0x9eb48ce91a77ff37f2edd032c90d7ec6a953b4fd","0x1f79cce5b8876a07541900e681b31a8e51766b5a","0xf77ded0ae91c41c432555beb25da2a6658338e5a","0xcc8b6c37fb97bdc774f0ea7f8b047e8ee057458c","0xc05c6a229c6ed34b9d31c88421d70ef71fbaabcf","0xf35eb225803ccf6ffb64be531bb91132a9229196","0x277e57e33c92c7f145832274384eeef35828db3d","0x2dddd703578d1f5bd1fad113c9e12f0c416305d5","0xd23432901c0754e28999661f31ab4aa3633ec2ed","0x747cc81b6c2b4afe13be59d31591d4229854b826","0xa0c13b5eca719be98ef27d0c4111cb5abbe97731","0x824422bd3ba030ca9ca5bcad26dfd4b45409849d","0xd2589f416c9412572df8d94fa1d58073c9f8f3bf","0x7bd375b95a1dbcbddb1e8219a01c550b21ed6ea2","0x5b91962f5eca75e6558e4d32df69b30f75cc6fe5","0x901b51b9a4214990ac6f0fd50a45df1573b7a51a"],Ws={getProtocolsState:(t,n)=>{const e={name:"Rollup Finance",id:"rollup",lastActivity:"",volume:0,interactions:0,activeDays:0,approves:0,url:"https://rollup.finance/"};return t.forEach(r=>{if(ct.includes(r.to.toLowerCase())){e.lastActivity===""&&(e.lastActivity=r.receivedAt),new Date(e.lastActivity)<new Date(r.receivedAt)&&(e.lastActivity=r.receivedAt),e.interactions+=1;const a=r.transfers.sort((i,c)=>parseInt(c.amount)*10**-c.token.decimals*c.token.price-parseInt(i.amount)*10**-i.token.decimals*i.token.price);if(a.length===0)return;e.volume+=parseInt(a[0].amount)*10**-a[0].token.decimals*a[0].token.price}}),e.activeDays=_(n,t,e.id,ct).days,e}},lt=["0x0700fb51560cfc8f896b2c812499d17c5b0bf6a7","0xe8826fc3ce6e74932144dbc2b369e7b52e88193a","0x7cf85f98c0339559eab22deea1e018721e800add","0xb376fceacd9fef24a342645cbf72a4c439ea0614","0xacf5a67f2fcfeda3946ccb1ad9d16d2eb65c3c96","0x4ad9ee1698b6d521ebb2883dd9fc3655c7553561","0x00f093ff2bca9da894396336286c7c5bd2310ca5","0x307baa142ba2bfa4a3059efb631899c992a193ee","0x77d807b74d54b81a87a5769176bc7719f676c8ce","0xbe7d1fd1f6748bbdefc4fbacafbb11c6fc506d1d"],Js={getProtocolsState:(t,n)=>{const e={name:"SpaceFi",id:"spacefi",lastActivity:"",volume:0,interactions:0,activeDays:0,approves:0,url:"https://spacefi.io/"};return t.forEach(r=>{if(lt.includes(r.to.toLowerCase())){e.lastActivity===""&&(e.lastActivity=r.receivedAt),new Date(e.lastActivity)<new Date(r.receivedAt)&&(e.lastActivity=r.receivedAt),e.interactions+=1;const a=r.transfers.sort((i,c)=>parseInt(c.amount)*10**-c.token.decimals*c.token.price-parseInt(i.amount)*10**-i.token.decimals*i.token.price);if(a.length===0)return;e.volume+=parseInt(a[0].amount)*10**-a[0].token.decimals*a[0].token.price}}),e.activeDays=_(n,t,e.id,lt).days,e}},dt=["0x1bdb8250eaf3c596441e6c3417c9d5195d6c85b9"],Gs={getProtocolsState:(t,n)=>{const e={name:"Starmaker",id:"starmaker",lastActivity:"",volume:0,interactions:0,activeDays:0,approves:0,url:"https://starmaker.exchange/"};return t.forEach(r=>{if(dt.includes(r.to.toLowerCase())){e.lastActivity===""&&(e.lastActivity=r.receivedAt),new Date(e.lastActivity)<new Date(r.receivedAt)&&(e.lastActivity=r.receivedAt),e.interactions+=1;const a=r.transfers.sort((i,c)=>parseInt(c.amount)*10**-c.token.decimals*c.token.price-parseInt(i.amount)*10**-i.token.decimals*i.token.price);if(a.length===0)return;e.volume+=parseInt(a[0].amount)*10**-a[0].token.decimals*a[0].token.price}}),e.activeDays=_(n,t,e.id,dt).days,e}},ut="0xd999e16e68476bc749a28fc14a0c3b6d7073f50c",ft=["0xcd52cbc975fbb802f82a1f92112b1250b5a997df"],qs={getProtocolsState:(t,n)=>{const e={name:"Velocore",id:"velocore",lastActivity:"",volume:0,interactions:0,activeDays:0,approves:0,url:"https://velocore.xyz/"};return t.forEach(r=>{if(ut.includes(r.to.toLowerCase())||ft.includes(r.to.toLowerCase())){e.lastActivity===""&&(e.lastActivity=r.receivedAt),new Date(e.lastActivity)<new Date(r.receivedAt)&&(e.lastActivity=r.receivedAt),e.interactions+=1;const a=r.transfers.sort((i,c)=>parseInt(c.amount)*10**-c.token.decimals*c.token.price-parseInt(i.amount)*10**-i.token.decimals*i.token.price);if(a.length===0)return;e.volume+=parseInt(a[0].amount)*10**-a[0].token.decimals*a[0].token.price}}),e.activeDays=_(n,t,e.id,ft.concat([ut])).days,e}},Ks={getProtocolsState:(t,n)=>{const e={name:"zkSync Era Portal",id:"zksynceraportal",lastActivity:"",volume:0,interactions:0,activeDays:0,approves:0,url:"https://portal.zksync.io/bridge"};return t.forEach(r=>{if(r.to.toLowerCase()==="0x000000000000000000000000000000000000800a"&&r.data.startsWith("0x51cff8d9")||r.to.toLowerCase()===n.toLowerCase()&&r.isL1Originated){e.lastActivity===""&&(e.lastActivity=r.receivedAt),new Date(e.lastActivity)<new Date(r.receivedAt)&&(e.lastActivity=r.receivedAt),e.interactions+=1;const a=r.transfers.sort((i,c)=>parseInt(c.amount)*10**-c.token.decimals*c.token.price-parseInt(i.amount)*10**-i.token.decimals*i.token.price);if(a.length===0)return;e.volume+=parseInt(a[0].amount)*10**-a[0].token.decimals*a[0].token.price}}),e.activeDays=_(n,t,e.id,["0x000000000000000000000000000000000000800a"]).days,e}},Ce=["0xa531ece441138d8ce52642ad497059f2a79fd96f"],Ys={getProtocolsState:(t,n)=>{const e={name:"zkSync ID",id:"zksyncid",lastActivity:"",volume:0,interactions:0,activeDays:0,approves:0,url:"https://www.zksyncid.xyz/"};return t.forEach(r=>{if(Ce.includes(r.to.toLowerCase())||Ce.includes(r.to.toLowerCase())){e.lastActivity===""&&(e.lastActivity=r.receivedAt),new Date(e.lastActivity)<new Date(r.receivedAt)&&(e.lastActivity=r.receivedAt),e.interactions+=1;const a=r.transfers.sort((i,c)=>parseInt(c.amount)*10**-c.token.decimals*c.token.price-parseInt(i.amount)*10**-i.token.decimals*i.token.price);if(a.length===0)return;e.volume+=parseInt(a[0].amount)*10**-a[0].token.decimals*a[0].token.price}}),e.activeDays=_(n,t,e.id,Ce).days,e}},mt=["0xae23b6e7f91ddebd3b70d74d20583e3e674bd94f"],Qs={getProtocolsState:(t,n)=>{const e={name:"zkSync Name Service",id:"zksyncnameservice",lastActivity:"",volume:0,interactions:0,activeDays:0,approves:0,url:"https://app.zkns.domains/"};return t.forEach(r=>{if(mt.includes(r.to.toLowerCase())){e.lastActivity===""&&(e.lastActivity=r.receivedAt),new Date(e.lastActivity)<new Date(r.receivedAt)&&(e.lastActivity=r.receivedAt),e.interactions+=1;const a=r.transfers.sort((i,c)=>parseInt(c.amount)*10**-c.token.decimals*c.token.price-parseInt(i.amount)*10**-i.token.decimals*i.token.price);if(a.length===0)return;e.volume+=parseInt(a[0].amount)*10**-a[0].token.decimals*a[0].token.price}}),e.activeDays=_(n,t,e.id,mt).days,e}},Xs=async(t,n)=>{const e=Os.getProtocolsState(t,n),r=Us.getProtocolsState(t,n),a=Ms.getProtocolsState(t,n),i=$s.getProtocolsState(t,n),c=Rs.getProtocolsState(t,n),u=Vs.getProtocolsState(t,n),h=Hs.getProtocolsState(t,n),x=Zs.getProtocolsState(t,n),k=Ws.getProtocolsState(t,n),C=Js.getProtocolsState(t,n),D=Gs.getProtocolsState(t,n),J=qs.getProtocolsState(t,n),ee=Ks.getProtocolsState(t,n),re=Ys.getProtocolsState(t,n),ve=Qs.getProtocolsState(t,n),ye=await Promise.all([e,r,a,i,c,u,h,x,k,C,D,J,ee,re,ve]);await Oe(Ue),await yt("zkProtocol",{address:n,data:JSON.stringify(ye)})},en=async t=>{try{const n="https://qr-mint.g7p.io/api/checkWhitelist?wallet="+t,r=(await W.get(n,{timeout:2e4})).data.success===!0?"yes":"no";return console.log(r),r}catch(n){return n.response&&n.response.status===400&&n.response.data&&n.response.data.message==="Your address is not eligible for this initial mint. Follow @zksync on Twitter for opportunities to mint the Libertas Omnibus project 🫡"?"no":"error"}},pt=async(t,n)=>{try{const e=await ls(t),r=await ds(e),a=us(e),i=await hs(t,e),c=await ys(t),u=await ks(t),h=await vs(t,"ethereum"),x=await As(t,"ethereum"),k=Ns(e,t);await Xs(e,t);const C=await en(t);return{totalFee:r,totalExchangeAmount:a,activity:i,zksEraBalance:c,zksLiteBalance:u,eth_balance:h,eth_tx_amount:x,bridge:k,isCanClaim:C,result:"success"}}catch(e){return{result:"error",reason:e.message}}},tn=t=>{const{t:n}=gt(),e=[{key:"1",logo:"https://20178098.fs1.hubspotusercontent-na1.net/hubfs/20178098/ecosystem/izumi-1.png",name:"iziswap",category:"DEX",url:"https://zksync.izumi.finance/swap",description:"izumi_Finance是专注流动性的多链DeFi协议，刚刚完成了新一轮22M的融资，iZiSwap上线zkSync一个月，TVL便突破40M，目前是zksync第二的dex,未来会把zksync给予项目方潜在空投的50%，用来回馈给用户。"},{key:"2",logo:"https://20178098.fs1.hubspotusercontent-na1.net/hubfs/20178098/ecosystem-logo-2/eco-logo-Galaxy-Owlto-Finance.png",name:"Owlto",category:"Bridge",url:"https://owlto.finance/",description:"快速/便宜/安全/好用的跨链桥."},{key:"3",logo:"https://portal.zksync.io/_nuxt/icons/64x64.cb7cab0d.png",name:"zkSync Portal",category:"Portal",url:"https://portal.zksync.io/",description:"zkSync官方钱包门户。"},{key:"4",logo:"https://portal.zksync.io/_nuxt/icons/64x64.cb7cab0d.png",name:"zkSync Bridge",category:"Bridge",url:"https://portal.zksync.io/bridge/",description:"zkSync官方桥。"},{key:"5",logo:"https://20178098.fs1.hubspotusercontent-na1.net/hubfs/20178098/ecosystem/meson.svg",name:"meson",category:"Bridge",url:"https://meson.fi/?from=bitboxtools",description:"Meson是一个领先的稳定币跨链协议，它允许稳定币在不同的区块链之间进行跨链交易。该协议支持 USDC、USDT 和 BUSD 等主流稳定币在 zkSync 和其他20条主流公链之间的跨链操作。"},{key:"6",logo:"https://20178098.fs1.hubspotusercontent-na1.net/hubfs/20178098/ecosystem/hito-transparent.svg",name:"Argent",category:"Wallet",url:"https://www.argent.xyz/",description:"Argent是一款基于以太坊的移动钱包，支持zkSync。"},{key:"7",logo:"https://20178098.fs1.hubspotusercontent-na1.net/hubfs/20178098/ecosystem/Group%20104439%20-%20Naomi%20LI.svg",name:"Element Market",category:"NFT",url:"https://element.market/",description:"Element Market是一个聚合NFT市场。"},{key:"8",logo:"https://20178098.fs1.hubspotusercontent-na1.net/hubfs/20178098/ecosystem/orbiter-1.png",name:"Orbiter",category:"Bridge",url:"https://orbiter.finance",description:"Orbiter是一个跨链桥。"},{key:"9",logo:"https://20178098.fs1.hubspotusercontent-na1.net/hubfs/20178098/ecosystem/okxwallet.png",name:"OKX Wallet",category:"Wallet",url:"https://www.okx.com/cn/web3",description:"OKX Wallet,Web3 的入口。"},{key:"10",logo:"https://20178098.fs1.hubspotusercontent-na1.net/hubfs/20178098/ecosystem-logo-2/eco-logo-DeBank.png",name:"DeBank",category:"Defi",url:"https://debank.com/",description:"DeBank是一个去中心化的钱包聚合资产平台。"}],r=Array.from(new Set(e.map(u=>u.category))).map(u=>({text:u,value:u})),a=[{title:"",dataIndex:"logo",key:"logo",align:"center",render:u=>o.jsx(ss,{src:u,alt:"logo",style:{width:"40px",height:"40px",objectFit:"contain"}})},{title:n("protocol"),dataIndex:"name",key:"name",align:"center"},{title:n("category"),dataIndex:"category",key:"category",align:"center",filters:r,onFilter:(u,h)=>h.category===u},{title:n("link"),dataIndex:"url",key:"url",align:"center",render:u=>o.jsx(De,{title:n("tip"),children:o.jsx("a",{href:u,target:"_blank",rel:"noreferrer",children:u})})},{title:n("intro"),dataIndex:"description",key:"description",align:"center",render:u=>o.jsx(De,{title:u,children:o.jsx("span",{children:u.length>30?`${u.substring(0,30)}...`:u})})}],{open:i,onCancel:c}=t;return o.jsxs(Ee,{title:o.jsxs(o.Fragment,{children:[n("ecosystem"),o.jsxs(Q,{color:"blue",style:{marginLeft:"8px",fontWeight:"bold"},children:[" ",n("tip2")," "]})]}),open:i,onCancel:c,footer:[o.jsx(V,{onClick:c,type:"primary",children:n("close")},"close")],width:1200,centered:!0,closable:!1,bodyStyle:{height:"500px",overflow:"auto"},children:[o.jsx(m,{columns:a,pagination:!1,size:"small",dataSource:e,style:{margin:"16px"}}),o.jsx("div",{style:{textAlign:"center",marginTop:"16px",fontWeight:"bold"},children:o.jsx("p",{children:"Wait more..."})})]})},{Content:sn}=Kt,{Text:R,Paragraph:nn}=ns,{TextArea:rn}=ht;function pn(){const{t}=gt(),[n,e]=v.useState(!1),[r,a]=v.useState([]),[i,c]=v.useState(!0),[u,h]=v.useState(!1),[x,k]=v.useState(!1),[C]=Se.useForm(),[D,J]=v.useState([]),[ee,re]=v.useState(!1),[ve,ye]=v.useState(!1),[wt,$e]=v.useState(null),[ge,At]=v.useState(null),[Re,St]=v.useState(!1),[Ve,It]=v.useState(!0);let He=r.length+1;v.useEffect(()=>{const l=localStorage.getItem("isGetTustalabsData");l&&It(l==="true")},[]),v.useEffect(()=>{ye(!0);const l=localStorage.getItem("addresses");setTimeout(()=>{ye(!1)},500),l&&a(JSON.parse(l)),St(!0)},[]),v.useEffect(()=>{Re&&localStorage.setItem("addresses",JSON.stringify(r))},[r,Re]);const Ze=async l=>{const d=l?[l]:D;if(!d.length){te.error({message:t("zk_error"),description:t("zk_error_msg3"),duration:1});return}re(!0);try{let j=0,E=[];const q=()=>{for(;E.length>0&&j<5;){const g=E.shift();j+=1,g().finally(()=>{j-=1,q()})}};for(let g of d){const T=r.findIndex(K=>K.key===g);if(T!==-1){const K=()=>new Promise(async(L,Y)=>{try{a(S=>{const b=[...S];for(let I in b[T])I!=="address"&&I!=="name"&&I!=="key"&&(I==="result"?b[T][I]="pending":b[T][I]=null);return b});const U=await pt(r[T].address,Ve);a(S=>{const b=[...S];return b[T]={...b[T],...U},localStorage.setItem("addresses",JSON.stringify(b)),b}),L()}catch(U){Y(U)}});E.push(K)}}for(q();j>0||E.length>0;)await new Promise(g=>setTimeout(g,100));te.success({message:"完成",description:"刷新地址数据完成",duration:1})}catch(A){s,te.error({message:t("zk_error"),description:A.message,duration:1})}finally{re(!1),l||J([])}},zt=async()=>{try{e(!0),h(!1);const d=(await C.validateFields()).addresses.split(`
`),A=5;let j=0,E=[];const q=()=>{for(;E.length>0&&j<A;){const g=E.shift();j+=1,g().finally(()=>{j-=1,q()})}};for(let g of d){if(g=g.trim(),g.length!==42){te.error({message:t("zk_error"),description:t("zk_error_msg"),duration:1});continue}const T=()=>new Promise(async(K,L)=>{try{a(U=>{const S=[...U];if(S.findIndex(I=>I.address===g)===-1){const I={key:He.toString(),address:g,result:"pending"};He++,S.push(I)}return S});const Y=await pt(g,Ve);a(U=>{const S=[...U],b=S.findIndex(I=>I.address===g);return b!==-1&&(S[b]={...S[b],...Y}),S}),K()}catch(Y){L(Y)}});E.push(T)}for(q();j>0||E.length>0;)await new Promise(g=>setTimeout(g,100));te.success({message:"成功",description:"批量添加完成",duration:1})}catch(l){te.error({message:t("zk_error"),description:l.message,duration:1})}finally{e(!1),C.resetFields(),J([])}},_t=()=>{c(!i)},jt=()=>i?o.jsx(Yt,{}):o.jsx(Qt,{}),Ct=()=>{h(!0)},Dt=()=>{Xt(r,"walletInfo")},Et=async l=>{a(r.filter(d=>d.address!==l)),localStorage.setItem("addresses",JSON.stringify(r.filter(d=>d.address!==l))),await ke("zkProtocol",[l]),await ke("zkTransactions",[l])},Tt=async()=>{if(!D.length){te.error({message:t("zk_error"),description:t("zk_error_msg2"),duration:1});return}const l=r.filter(d=>D.includes(d.key)).map(d=>d.address);await ke("zkTransactions",l),await ke("zkProtocol",l),a(r.filter(d=>!D.includes(d.key))),localStorage.setItem("addresses",JSON.stringify(r.filter(d=>!D.includes(d.key)))),J([])},Lt={selectedRowKeys:D,onChange:l=>{J(l)}},Ft=()=>{h(!1)},Bt=async l=>{await Oe(Ue);const d=await ts("zkProtocol",l);console.log(d);const A=d.data?JSON.parse(d.data):[];return{address:l,protocols:A}},Nt=[{title:"#",key:"index",align:"center",render:(l,d,A)=>A+1},{title:t("notes"),dataIndex:"name",key:"name",align:"center",render:(l,d)=>{const A=l||o.jsx(Je,{});return o.jsx(Ie,{title:o.jsx("div",{children:o.jsx(ht,{placeholder:"请输入备注",defaultValue:l,onChange:j=>{d.name=j.target.value},allowClear:!0,bordered:!0})}),icon:o.jsx(Je,{}),onConfirm:()=>{a([...r]),localStorage.setItem("addresses",JSON.stringify(r))},onCancel:()=>{},okText:"确定",cancelText:"取消",children:o.jsx(Q,{color:"blue",style:{cursor:"pointer"},children:A})})}},{title:o.jsxs("span",{children:[t("address"),o.jsx("span",{onClick:_t,style:{marginLeft:8,cursor:"pointer"},children:jt()})]}),dataIndex:"address",key:"address",align:"center",render:l=>{const d=i?l.slice(0,4)+"***"+l.slice(-4):l;return o.jsx(nn,{copyable:{text:l},style:{whiteSpace:"nowrap",margin:0},children:d})}},{title:"ETH",key:"eth_group",className:"zks_eth",children:[{title:"ETH",dataIndex:"eth_balance",key:"eth_balance",align:"center"},{title:"Tx",dataIndex:"eth_tx_amount",key:"eth_tx_amount",align:"center"}]},{title:"zkSyncLite",key:"zks_lite_group",className:"zks_lite",children:[{title:"ETH",dataIndex:["zksLiteBalance","zks1_balance"],key:"zks1_balance",align:"center"},{title:"Tx",dataIndex:["zksLiteBalance","zks1_tx_amount"],key:"zks1_tx_amount",align:"center",sorter:(l,d)=>l.zksLiteBalance.zks1_tx_amount-d.zksLiteBalance.zks1_tx_amount},{title:t("last_tx"),dataIndex:["zksLiteBalance","zks1_latest_tx"],key:"zks1_latest_tx",align:"center"}]},{title:"zkSyncEra",key:"zks_era_group",className:"zks_era",children:[{title:"ETH",dataIndex:["zksEraBalance","zks2_balance"],key:"zks2_balance",align:"center"},{title:"USDC",dataIndex:["zksEraBalance","zks2_usdcBalance"],key:"zks2_usdcBalance",align:"center"},{title:"Tx",dataIndex:["zksEraBalance","zks2_tx_amount"],key:"zks2_tx_amount",align:"center",sorter:(l,d)=>l.zksEraBalance.zks2_tx_amount-d.zksEraBalance.zks2_tx_amount},{title:t("last_tx"),dataIndex:["activity","zks2_last_tx"],key:"zks2_last_tx",align:"center",render:(l,d)=>o.jsx("a",{href:"https://explorer.zksync.io/address/"+d.address,target:"_blank",children:l})},{title:t("official_bridge_tx"),key:"cross_chain_tx_count_group",children:[{title:"L1->L2",dataIndex:["bridge","l1Tol2Times"],key:"l1Tol2Times",align:"center"},{title:"L2->L1",dataIndex:["bridge","l2Tol1Times"],key:"l2Tol1Times",align:"center"}]},{title:t("official_bridge_amount"),key:"cross_chain_amount_group",children:[{title:"L1->L2",dataIndex:["bridge","l1Tol2Amount"],key:"l1Tol2Amount",align:"center"},{title:"L2->L1",dataIndex:["bridge","l2Tol1Amount"],key:"l2Tol1Amount",align:"center"}]},{title:t("activities"),key:"activity_stats_group",children:[{title:t("day"),dataIndex:["activity","dayActivity"],key:"dayActivity",align:"center"},{title:t("week"),dataIndex:["activity","weekActivity"],key:"weekActivity",align:"center"},{title:t("month"),dataIndex:["activity","monthActivity"],key:"monthActivity",align:"center"},{title:t("contract"),dataIndex:["activity","contractActivity"],key:"contractActivity",align:"center"},{title:t("amount"),dataIndex:"totalExchangeAmount",key:"totalExchangeAmount",align:"center",sorter:(l,d)=>l.totalExchangeAmount-d.totalExchangeAmount},{title:t("fee"),dataIndex:"totalFee",key:"totalFee",align:"center"}]}]},{title:"NFT是否可领",key:"nft",align:"center",dataIndex:"isCanClaim",render:l=>o.jsxs(ze,{children:[l&&l==="yes"?o.jsx(Q,{color:"success",children:"是"}):null,l&&l==="no"?o.jsx(Q,{color:"error",children:"否"}):null,l&&l==="error"?o.jsx(Q,{color:"error",children:"获取失败"}):null]})},{title:t("state"),key:"result",align:"center",render:(l,d)=>o.jsxs(ze,{children:[d.result==="success"?o.jsx(Q,{icon:o.jsx(Rt,{}),color:"success",children:"成功"}):null,d.result==="error"?o.jsx(De,{title:d.reason,children:o.jsx(Q,{icon:o.jsx(Vt,{}),color:"error",children:"失败 "})}):null,d.result==="pending"?o.jsx(Q,{icon:o.jsx(Ge,{spin:!0}),color:"processing",children:"获取中 "}):null]})},{title:t("operation"),key:"action",align:"center",render:(l,d)=>o.jsxs(ze,{size:"small",children:[o.jsx(Ie,{title:t("zk_message_confirm_delete"),onConfirm:async()=>{await Et(d.address)},children:o.jsx(V,{icon:o.jsx(qe,{})})}),o.jsx(V,{icon:o.jsx(Ht,{}),onClick:()=>{$e(d.address),Bt(d.address).then(A=>{At(A)})}}),o.jsx(V,{icon:o.jsx(Zt,{}),onClick:()=>{Ze(d.key)}})]})}],Pt=[{title:"",dataIndex:"logo",key:"logo",align:"center",render:(l,d)=>o.jsx("img",{src:"/protocol/"+d.id+".png",style:{width:"20px",height:"20px"},alt:d.id})},{title:t("protocol"),dataIndex:"name",key:"name",align:"center",render:(l,d)=>o.jsx("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",children:l})},{title:"tx",dataIndex:"interactions",key:"interactions",sorter:(l,d)=>l.interactions-d.interactions,align:"center"},{title:t("last_tx"),dataIndex:"lastActivity",key:"lastActivity",align:"center",render:l=>l===""?"无":new Date(l).toLocaleString("zh-CN",{timeZone:"Asia/Shanghai"})},{title:t("amount"),dataIndex:"volume",key:"volume",align:"center",sorter:(l,d)=>l.volume-d.volume,defaultSortOrder:"descend",render:l=>Number(l).toFixed(2)}];function G(l,d=3){return l===0?"0":l.toFixed(d)}const $={display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:"100%"},Ot=l=>{let d=0,A=0,j=0,E=0,q=0,g=0,T=0,K=0;return l.forEach(L=>{var Y,U,S,b,I;d+=parseFloat(L.eth_balance||0),A+=parseFloat(((Y=L.zksLiteBalance)==null?void 0:Y.zks1_balance)||0),j+=parseFloat(((U=L.zksEraBalance)==null?void 0:U.zks2_balance)||0),E+=parseFloat(((S=L.zksEraBalance)==null?void 0:S.zks2_usdcBalance)||0),q+=parseFloat(((b=L.bridge)==null?void 0:b.l1Tol2Amount)||0),g+=parseFloat(((I=L.bridge)==null?void 0:I.l2Tol1Amount)||0),T+=parseFloat(L.totalExchangeAmount||0),K+=parseFloat(L.totalFee||0)}),o.jsx(m.Summary,{children:o.jsxs(m.Summary.Row,{children:[o.jsx(m.Summary.Cell,{index:0,children:o.jsx("div",{style:$,children:o.jsx(R,{type:"danger",children:"总计"})})}),o.jsx(m.Summary.Cell,{index:1}),o.jsx(m.Summary.Cell,{index:2}),o.jsx(m.Summary.Cell,{index:3}),o.jsx(m.Summary.Cell,{index:4,children:o.jsx("div",{style:$,children:o.jsx(R,{type:"danger",children:G(d)})})}),o.jsx(m.Summary.Cell,{index:5}),o.jsx(m.Summary.Cell,{index:6,children:o.jsx("div",{style:$,children:o.jsx(R,{type:"danger",children:G(A)})})}),o.jsx(m.Summary.Cell,{index:7}),o.jsx(m.Summary.Cell,{index:8}),o.jsx(m.Summary.Cell,{index:9,children:o.jsx("div",{style:$,children:o.jsx(R,{type:"danger",children:G(j)})})}),o.jsx(m.Summary.Cell,{index:10,children:o.jsx("div",{style:$,children:o.jsx(R,{type:"danger",children:G(E,2)})})}),o.jsx(m.Summary.Cell,{index:11}),o.jsx(m.Summary.Cell,{index:12}),o.jsx(m.Summary.Cell,{index:13}),o.jsx(m.Summary.Cell,{index:14}),o.jsx(m.Summary.Cell,{index:15,children:o.jsx("div",{style:$,children:o.jsx(R,{type:"danger",children:G(q)})})}),o.jsx(m.Summary.Cell,{index:16,children:o.jsx("div",{style:$,children:o.jsx(R,{type:"danger",children:G(g)})})}),o.jsx(m.Summary.Cell,{index:17}),o.jsx(m.Summary.Cell,{index:18}),o.jsx(m.Summary.Cell,{index:19}),o.jsx(m.Summary.Cell,{index:20}),o.jsx(m.Summary.Cell,{index:21,children:o.jsx("div",{style:$,children:o.jsx(R,{type:"danger",children:G(T,2)})})}),o.jsx(m.Summary.Cell,{index:22,children:o.jsx("div",{style:$,children:o.jsx(R,{type:"danger",children:G(K,2)})})}),o.jsx(m.Summary.Cell,{index:23}),o.jsx(m.Summary.Cell,{index:24}),o.jsx(m.Summary.Cell,{index:25})]})})};return o.jsx("div",{children:o.jsxs(sn,{children:[o.jsx(tn,{open:x,onCancel:()=>k(!1)}),o.jsx(Ee,{title:ge&&ge.address+"  "+t("address_detail"),open:wt!==null,onCancel:()=>$e(null),footer:null,width:1e3,centered:!0,bodyStyle:{height:"500px",overflow:"auto"},children:o.jsx("div",{children:ge&&o.jsx(m,{columns:Pt,dataSource:ge.protocols,pagination:!1,defaultSortOrder:"descend",size:"small"})})}),o.jsx(Ee,{title:t("batch_add_address"),open:u,onOk:zt,onCancel:Ft,okButtonProps:{loading:ee},okText:"OK",cancelText:"Cancel",children:o.jsx(Se,{form:C,layout:"vertical",children:o.jsx(Se.Item,{label:t("address"),name:"addresses",rules:[{required:!0}],children:o.jsx(rn,{placeholder:t("zk_msg"),style:{width:"500px",height:"200px"}})})})}),o.jsx("div",{style:{marginBottom:"50px"},children:o.jsx(Wt,{spinning:ve,size:"small",children:o.jsx(m,{rowKey:l=>l.key,rowSelection:Lt,dataSource:r,pagination:!1,bordered:!0,style:{marginBottom:"20px",zIndex:2},size:"small",columns:Nt,summary:Ot})})}),o.jsx("div",{className:"zks_footer",children:o.jsx(Jt,{size:"small",style:{width:"100%"},children:o.jsxs("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",gap:"10px"},children:[o.jsx(V,{type:"primary",onClick:()=>{k(!0)},size:"large",style:{width:"20%"},icon:o.jsx(is,{}),children:o.jsx("span",{style:{color:"white"},children:t("ecosystem")})}),o.jsx(V,{type:"primary",onClick:Ct,size:"large",style:{width:"20%"},icon:o.jsx(Gt,{}),loading:n,children:t(n?"adding":"batch_add_address")}),o.jsx(V,{type:"primary",onClick:()=>Ze(),loading:ee,size:"large",style:{width:"20%"},icon:o.jsx(Ge,{}),children:t(ee?"refreshing":"refresh_selected_address")}),o.jsx(Ie,{title:t("confirm_delete")+D.length+t("address_count")+"?",onConfirm:async()=>{await Tt()},children:o.jsx(V,{type:"primary",danger:!0,size:"large",style:{width:"20%"},icon:o.jsx(qe,{}),children:t("delete_selected_address")})}),o.jsx(V,{type:"primary",icon:o.jsx(qt,{}),size:"large",style:{width:"8%"},onClick:Dt})]})})})]})})}export{pn as default};
